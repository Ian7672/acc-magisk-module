<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><style>@font-face {
  font-family: octicons-link;
  src: url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM+8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB/aFGpk3jaTY6xa8JAGMW/O62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v+k/0an2i+itHDw3v2+9+DBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3/I7AtxEJLtzzuZfI+VVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy/Lt7Kc+0vWY/gAgIIEqAN9we0pwKXreiMasxvabDQMM4riO+qxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw+ymhce7vwM9jSqO8JyVd5RH9gyTt2+J/yUmYlIR0s04n6+7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv/ocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi+W2+MjCzMIDApSwvXzC97Z4Ig8N/BxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh/8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT+AEjAwuDFpBmA9KMDEwMCh9i/v8H8sH0/4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9/lqYwOGZxeUelN2U2R6+cArgtCJpauW7UQBqnFkUsjAY/kOU1cP+DAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl+vvmM/byA48e6tWrKArm4ZJlCbdsrxksL1AwWn/yBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO//sdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd/89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF+9JOS0nbaaYDCQfwCJ7Au3AHj+LO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm+EBXuAbHmIMSRMs+4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL+hD7C1xoaHeLJSEao0FEW14ckxC+TU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13/+lm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl+9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O/AdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB///AA8AAQAAAAAAAAAAAAAAAAABAAAAAA==) format('woff');
}

@media (prefers-color-scheme: dark) {
  body,
  [data-theme="dark"] {
    /*dark*/
    color-scheme: dark;
    --color-prettylights-syntax-comment: #8b949e;
    --color-prettylights-syntax-constant: #79c0ff;
    --color-prettylights-syntax-entity: #d2a8ff;
    --color-prettylights-syntax-storage-modifier-import: #c9d1d9;
    --color-prettylights-syntax-entity-tag: #7ee787;
    --color-prettylights-syntax-keyword: #ff7b72;
    --color-prettylights-syntax-string: #a5d6ff;
    --color-prettylights-syntax-variable: #ffa657;
    --color-prettylights-syntax-brackethighlighter-unmatched: #f85149;
    --color-prettylights-syntax-invalid-illegal-text: #f0f6fc;
    --color-prettylights-syntax-invalid-illegal-bg: #8e1519;
    --color-prettylights-syntax-carriage-return-text: #f0f6fc;
    --color-prettylights-syntax-carriage-return-bg: #b62324;
    --color-prettylights-syntax-string-regexp: #7ee787;
    --color-prettylights-syntax-markup-list: #f2cc60;
    --color-prettylights-syntax-markup-heading: #1f6feb;
    --color-prettylights-syntax-markup-italic: #c9d1d9;
    --color-prettylights-syntax-markup-bold: #c9d1d9;
    --color-prettylights-syntax-markup-deleted-text: #ffdcd7;
    --color-prettylights-syntax-markup-deleted-bg: #67060c;
    --color-prettylights-syntax-markup-inserted-text: #aff5b4;
    --color-prettylights-syntax-markup-inserted-bg: #033a16;
    --color-prettylights-syntax-markup-changed-text: #ffdfb6;
    --color-prettylights-syntax-markup-changed-bg: #5a1e02;
    --color-prettylights-syntax-markup-ignored-text: #c9d1d9;
    --color-prettylights-syntax-markup-ignored-bg: #1158c7;
    --color-prettylights-syntax-meta-diff-range: #d2a8ff;
    --color-prettylights-syntax-brackethighlighter-angle: #8b949e;
    --color-prettylights-syntax-sublimelinter-gutter-mark: #484f58;
    --color-prettylights-syntax-constant-other-reference-link: #a5d6ff;
    --color-fg-default: #e6edf3;
    --color-fg-muted: #848d97;
    --color-fg-subtle: #6e7681;
    --color-canvas-default: #0d1117;
    --color-canvas-subtle: #161b22;
    --color-border-default: #30363d;
    --color-border-muted: #21262d;
    --color-neutral-muted: rgba(110,118,129,0.4);
    --color-accent-fg: #2f81f7;
    --color-accent-emphasis: #1f6feb;
    --color-success-fg: #3fb950;
    --color-success-emphasis: #238636;
    --color-attention-fg: #d29922;
    --color-attention-emphasis: #9e6a03;
    --color-attention-subtle: rgba(187,128,9,0.15);
    --color-danger-fg: #f85149;
    --color-danger-emphasis: #da3633;
    --color-done-fg: #a371f7;
    --color-done-emphasis: #8957e5;
  }
}

@media (prefers-color-scheme: light) {
  body,
  [data-theme="light"] {
    /*light*/
    color-scheme: light;
    --color-prettylights-syntax-comment: #57606a;
    --color-prettylights-syntax-constant: #0550ae;
    --color-prettylights-syntax-entity: #6639ba;
    --color-prettylights-syntax-storage-modifier-import: #24292f;
    --color-prettylights-syntax-entity-tag: #116329;
    --color-prettylights-syntax-keyword: #cf222e;
    --color-prettylights-syntax-string: #0a3069;
    --color-prettylights-syntax-variable: #953800;
    --color-prettylights-syntax-brackethighlighter-unmatched: #82071e;
    --color-prettylights-syntax-invalid-illegal-text: #f6f8fa;
    --color-prettylights-syntax-invalid-illegal-bg: #82071e;
    --color-prettylights-syntax-carriage-return-text: #f6f8fa;
    --color-prettylights-syntax-carriage-return-bg: #cf222e;
    --color-prettylights-syntax-string-regexp: #116329;
    --color-prettylights-syntax-markup-list: #3b2300;
    --color-prettylights-syntax-markup-heading: #0550ae;
    --color-prettylights-syntax-markup-italic: #24292f;
    --color-prettylights-syntax-markup-bold: #24292f;
    --color-prettylights-syntax-markup-deleted-text: #82071e;
    --color-prettylights-syntax-markup-deleted-bg: #ffebe9;
    --color-prettylights-syntax-markup-inserted-text: #116329;
    --color-prettylights-syntax-markup-inserted-bg: #dafbe1;
    --color-prettylights-syntax-markup-changed-text: #953800;
    --color-prettylights-syntax-markup-changed-bg: #ffd8b5;
    --color-prettylights-syntax-markup-ignored-text: #eaeef2;
    --color-prettylights-syntax-markup-ignored-bg: #0550ae;
    --color-prettylights-syntax-meta-diff-range: #8250df;
    --color-prettylights-syntax-brackethighlighter-angle: #57606a;
    --color-prettylights-syntax-sublimelinter-gutter-mark: #8c959f;
    --color-prettylights-syntax-constant-other-reference-link: #0a3069;
    --color-fg-default: #1F2328;
    --color-fg-muted: #656d76;
    --color-fg-subtle: #6e7781;
    --color-canvas-default: #ffffff;
    --color-canvas-subtle: #f6f8fa;
    --color-border-default: #d0d7de;
    --color-border-muted: hsla(210,18%,87%,1);
    --color-neutral-muted: rgba(175,184,193,0.2);
    --color-accent-fg: #0969da;
    --color-accent-emphasis: #0969da;
    --color-success-fg: #1a7f37;
    --color-success-emphasis: #1f883d;
    --color-attention-fg: #9a6700;
    --color-attention-emphasis: #9a6700;
    --color-attention-subtle: #fff8c5;
    --color-danger-fg: #d1242f;
    --color-danger-emphasis: #cf222e;
    --color-done-fg: #8250df;
    --color-done-emphasis: #8250df;
  }
}

body {
    width: 980px;
    margin-right: auto;
    margin-left: auto;
    background-color: var(--color-canvas-default);
}

.markdown-body .octicon-link:before {
  font: normal normal normal 16px/1 octicons-link;
  display: inline-block;
  text-decoration: none;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  content: '\f05c';
  vertical-align: middle;
}

.markdown-body {
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  margin: 0;
  color: var(--color-fg-default);
  background-color: var(--color-canvas-default);
  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";
  font-size: 16px;
  line-height: 1.5;
  word-wrap: break-word;
}

.markdown-body .octicon {
  display: inline-block;
  fill: currentColor;
  vertical-align: text-bottom;
}

.markdown-body h1:hover .anchor .octicon-link:before,
.markdown-body h2:hover .anchor .octicon-link:before,
.markdown-body h3:hover .anchor .octicon-link:before,
.markdown-body h4:hover .anchor .octicon-link:before,
.markdown-body h5:hover .anchor .octicon-link:before,
.markdown-body h6:hover .anchor .octicon-link:before {
  width: 16px;
  height: 16px;
  content: ' ';
  display: inline-block;
  background-color: currentColor;
  -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
  mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
}

.markdown-body details,
.markdown-body figcaption,
.markdown-body figure {
  display: block;
}

.markdown-body summary {
  display: list-item;
}

.markdown-body [hidden] {
  display: none !important;
}

.markdown-body a {
  background-color: transparent;
  color: var(--color-accent-fg);
  text-decoration: none;
}

.markdown-body abbr[title] {
  border-bottom: none;
  -webkit-text-decoration: underline dotted;
  text-decoration: underline dotted;
}

.markdown-body b,
.markdown-body strong {
  font-weight: var(--base-text-weight-semibold, 600);
}

.markdown-body dfn {
  font-style: italic;
}

.markdown-body h1 {
  margin: .67em 0;
  font-weight: var(--base-text-weight-semibold, 600);
  padding-bottom: .3em;
  font-size: 2em;
  border-bottom: 1px solid var(--color-border-muted);
}

.markdown-body mark {
  background-color: var(--color-attention-subtle);
  color: var(--color-fg-default);
}

.markdown-body small {
  font-size: 90%;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body sup {
  top: -0.5em;
}

.markdown-body img {
  border-style: none;
  max-width: 100%;
  box-sizing: content-box;
  background-color: var(--color-canvas-default);
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace;
  font-size: 1em;
}

.markdown-body figure {
  margin: 1em 40px;
}

.markdown-body hr {
  box-sizing: content-box;
  overflow: hidden;
  background: transparent;
  border-bottom: 1px solid var(--color-border-muted);
  height: .25em;
  padding: 0;
  margin: 24px 0;
  background-color: var(--color-border-default);
  border: 0;
}

.markdown-body input {
  font: inherit;
  margin: 0;
  overflow: visible;
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
}

.markdown-body [type=button],
.markdown-body [type=reset],
.markdown-body [type=submit] {
  -webkit-appearance: button;
  appearance: button;
}

.markdown-body [type=checkbox],
.markdown-body [type=radio] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body [type=number]::-webkit-inner-spin-button,
.markdown-body [type=number]::-webkit-outer-spin-button {
  height: auto;
}

.markdown-body [type=search]::-webkit-search-cancel-button,
.markdown-body [type=search]::-webkit-search-decoration {
  -webkit-appearance: none;
  appearance: none;
}

.markdown-body ::-webkit-input-placeholder {
  color: inherit;
  opacity: .54;
}

.markdown-body ::-webkit-file-upload-button {
  -webkit-appearance: button;
  appearance: button;
  font: inherit;
}

.markdown-body a:hover {
  text-decoration: underline;
}

.markdown-body ::placeholder {
  color: var(--color-fg-subtle);
  opacity: 1;
}

.markdown-body hr::before {
  display: table;
  content: "";
}

.markdown-body hr::after {
  display: table;
  clear: both;
  content: "";
}

.markdown-body table {
  border-spacing: 0;
  border-collapse: collapse;
  display: block;
  width: max-content;
  max-width: 100%;
  overflow: auto;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body details summary {
  cursor: pointer;
}

.markdown-body details:not([open])>*:not(summary) {
  display: none !important;
}

.markdown-body a:focus,
.markdown-body [role=button]:focus,
.markdown-body input[type=radio]:focus,
.markdown-body input[type=checkbox]:focus {
  outline: 2px solid var(--color-accent-fg);
  outline-offset: -2px;
  box-shadow: none;
}

.markdown-body a:focus:not(:focus-visible),
.markdown-body [role=button]:focus:not(:focus-visible),
.markdown-body input[type=radio]:focus:not(:focus-visible),
.markdown-body input[type=checkbox]:focus:not(:focus-visible) {
  outline: solid 1px transparent;
}

.markdown-body a:focus-visible,
.markdown-body [role=button]:focus-visible,
.markdown-body input[type=radio]:focus-visible,
.markdown-body input[type=checkbox]:focus-visible {
  outline: 2px solid var(--color-accent-fg);
  outline-offset: -2px;
  box-shadow: none;
}

.markdown-body a:not([class]):focus,
.markdown-body a:not([class]):focus-visible,
.markdown-body input[type=radio]:focus,
.markdown-body input[type=radio]:focus-visible,
.markdown-body input[type=checkbox]:focus,
.markdown-body input[type=checkbox]:focus-visible {
  outline-offset: 0;
}

.markdown-body kbd {
  display: inline-block;
  padding: 3px 5px;
  font: 11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
  line-height: 10px;
  color: var(--color-fg-default);
  vertical-align: middle;
  background-color: var(--color-canvas-subtle);
  border: solid 1px var(--color-neutral-muted);
  border-bottom-color: var(--color-neutral-muted);
  border-radius: 6px;
  box-shadow: inset 0 -1px 0 var(--color-neutral-muted);
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 24px;
  margin-bottom: 16px;
  font-weight: var(--base-text-weight-semibold, 600);
  line-height: 1.25;
}

.markdown-body h2 {
  font-weight: var(--base-text-weight-semibold, 600);
  padding-bottom: .3em;
  font-size: 1.5em;
  border-bottom: 1px solid var(--color-border-muted);
}

.markdown-body h3 {
  font-weight: var(--base-text-weight-semibold, 600);
  font-size: 1.25em;
}

.markdown-body h4 {
  font-weight: var(--base-text-weight-semibold, 600);
  font-size: 1em;
}

.markdown-body h5 {
  font-weight: var(--base-text-weight-semibold, 600);
  font-size: .875em;
}

.markdown-body h6 {
  font-weight: var(--base-text-weight-semibold, 600);
  font-size: .85em;
  color: var(--color-fg-muted);
}

.markdown-body p {
  margin-top: 0;
  margin-bottom: 10px;
}

.markdown-body blockquote {
  margin: 0;
  padding: 0 1em;
  color: var(--color-fg-muted);
  border-left: .25em solid var(--color-border-default);
}

.markdown-body ul,
.markdown-body ol {
  margin-top: 0;
  margin-bottom: 0;
  padding-left: 2em;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body tt,
.markdown-body code,
.markdown-body samp {
  font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
  font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
  font-size: 12px;
  word-wrap: normal;
}

.markdown-body .octicon {
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-body input::-webkit-outer-spin-button,
.markdown-body input::-webkit-inner-spin-button {
  margin: 0;
  -webkit-appearance: none;
  appearance: none;
}

.markdown-body .mr-2 {
  margin-right: var(--base-size-8, 8px) !important;
}

.markdown-body::before {
  display: table;
  content: "";
}

.markdown-body::after {
  display: table;
  clear: both;
  content: "";
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body a:not([href]) {
  color: inherit;
  text-decoration: none;
}

.markdown-body .absent {
  color: var(--color-danger-fg);
}

.markdown-body .anchor {
  float: left;
  padding-right: 4px;
  margin-left: -20px;
  line-height: 1;
}

.markdown-body .anchor:focus {
  outline: none;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body details {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body h1 .octicon-link,
.markdown-body h2 .octicon-link,
.markdown-body h3 .octicon-link,
.markdown-body h4 .octicon-link,
.markdown-body h5 .octicon-link,
.markdown-body h6 .octicon-link {
  color: var(--color-fg-default);
  vertical-align: middle;
  visibility: hidden;
}

.markdown-body h1:hover .anchor,
.markdown-body h2:hover .anchor,
.markdown-body h3:hover .anchor,
.markdown-body h4:hover .anchor,
.markdown-body h5:hover .anchor,
.markdown-body h6:hover .anchor {
  text-decoration: none;
}

.markdown-body h1:hover .anchor .octicon-link,
.markdown-body h2:hover .anchor .octicon-link,
.markdown-body h3:hover .anchor .octicon-link,
.markdown-body h4:hover .anchor .octicon-link,
.markdown-body h5:hover .anchor .octicon-link,
.markdown-body h6:hover .anchor .octicon-link {
  visibility: visible;
}

.markdown-body h1 tt,
.markdown-body h1 code,
.markdown-body h2 tt,
.markdown-body h2 code,
.markdown-body h3 tt,
.markdown-body h3 code,
.markdown-body h4 tt,
.markdown-body h4 code,
.markdown-body h5 tt,
.markdown-body h5 code,
.markdown-body h6 tt,
.markdown-body h6 code {
  padding: 0 .2em;
  font-size: inherit;
}

.markdown-body summary h1,
.markdown-body summary h2,
.markdown-body summary h3,
.markdown-body summary h4,
.markdown-body summary h5,
.markdown-body summary h6 {
  display: inline-block;
}

.markdown-body summary h1 .anchor,
.markdown-body summary h2 .anchor,
.markdown-body summary h3 .anchor,
.markdown-body summary h4 .anchor,
.markdown-body summary h5 .anchor,
.markdown-body summary h6 .anchor {
  margin-left: -40px;
}

.markdown-body summary h1,
.markdown-body summary h2 {
  padding-bottom: 0;
  border-bottom: 0;
}

.markdown-body ul.no-list,
.markdown-body ol.no-list {
  padding: 0;
  list-style-type: none;
}

.markdown-body ol[type="a s"] {
  list-style-type: lower-alpha;
}

.markdown-body ol[type="A s"] {
  list-style-type: upper-alpha;
}

.markdown-body ol[type="i s"] {
  list-style-type: lower-roman;
}

.markdown-body ol[type="I s"] {
  list-style-type: upper-roman;
}

.markdown-body ol[type="1"] {
  list-style-type: decimal;
}

.markdown-body div>ol:not([type]) {
  list-style-type: decimal;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body li+li {
  margin-top: .25em;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: var(--base-text-weight-semibold, 600);
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body table th {
  font-weight: var(--base-text-weight-semibold, 600);
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid var(--color-border-default);
}

.markdown-body table td>:last-child {
  margin-bottom: 0;
}

.markdown-body table tr {
  background-color: var(--color-canvas-default);
  border-top: 1px solid var(--color-border-muted);
}

.markdown-body table tr:nth-child(2n) {
  background-color: var(--color-canvas-subtle);
}

.markdown-body table img {
  background-color: transparent;
}

.markdown-body img[align=right] {
  padding-left: 20px;
}

.markdown-body img[align=left] {
  padding-right: 20px;
}

.markdown-body .emoji {
  max-width: none;
  vertical-align: text-top;
  background-color: transparent;
}

.markdown-body span.frame {
  display: block;
  overflow: hidden;
}

.markdown-body span.frame>span {
  display: block;
  float: left;
  width: auto;
  padding: 7px;
  margin: 13px 0 0;
  overflow: hidden;
  border: 1px solid var(--color-border-default);
}

.markdown-body span.frame span img {
  display: block;
  float: left;
}

.markdown-body span.frame span span {
  display: block;
  padding: 5px 0 0;
  clear: both;
  color: var(--color-fg-default);
}

.markdown-body span.align-center {
  display: block;
  overflow: hidden;
  clear: both;
}

.markdown-body span.align-center>span {
  display: block;
  margin: 13px auto 0;
  overflow: hidden;
  text-align: center;
}

.markdown-body span.align-center span img {
  margin: 0 auto;
  text-align: center;
}

.markdown-body span.align-right {
  display: block;
  overflow: hidden;
  clear: both;
}

.markdown-body span.align-right>span {
  display: block;
  margin: 13px 0 0;
  overflow: hidden;
  text-align: right;
}

.markdown-body span.align-right span img {
  margin: 0;
  text-align: right;
}

.markdown-body span.float-left {
  display: block;
  float: left;
  margin-right: 13px;
  overflow: hidden;
}

.markdown-body span.float-left span {
  margin: 13px 0 0;
}

.markdown-body span.float-right {
  display: block;
  float: right;
  margin-left: 13px;
  overflow: hidden;
}

.markdown-body span.float-right>span {
  display: block;
  margin: 13px auto 0;
  overflow: hidden;
  text-align: right;
}

.markdown-body code,
.markdown-body tt {
  padding: .2em .4em;
  margin: 0;
  font-size: 85%;
  white-space: break-spaces;
  background-color: var(--color-neutral-muted);
  border-radius: 6px;
}

.markdown-body code br,
.markdown-body tt br {
  display: none;
}

.markdown-body del code {
  text-decoration: inherit;
}

.markdown-body samp {
  font-size: 85%;
}

.markdown-body pre code {
  font-size: 100%;
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .highlight {
  margin-bottom: 16px;
}

.markdown-body .highlight pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body .highlight pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  color: var(--color-fg-default);
  background-color: var(--color-canvas-subtle);
  border-radius: 6px;
}

.markdown-body pre code,
.markdown-body pre tt {
  display: inline;
  max-width: auto;
  padding: 0;
  margin: 0;
  overflow: visible;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body .csv-data td,
.markdown-body .csv-data th {
  padding: 5px;
  overflow: hidden;
  font-size: 12px;
  line-height: 1;
  text-align: left;
  white-space: nowrap;
}

.markdown-body .csv-data .blob-num {
  padding: 10px 8px 9px;
  text-align: right;
  background: var(--color-canvas-default);
  border: 0;
}

.markdown-body .csv-data tr {
  border-top: 0;
}

.markdown-body .csv-data th {
  font-weight: var(--base-text-weight-semibold, 600);
  background: var(--color-canvas-subtle);
  border-top: 0;
}

.markdown-body [data-footnote-ref]::before {
  content: "[";
}

.markdown-body [data-footnote-ref]::after {
  content: "]";
}

.markdown-body .footnotes {
  font-size: 12px;
  color: var(--color-fg-muted);
  border-top: 1px solid var(--color-border-default);
}

.markdown-body .footnotes ol {
  padding-left: 16px;
}

.markdown-body .footnotes ol ul {
  display: inline-block;
  padding-left: 16px;
  margin-top: 16px;
}

.markdown-body .footnotes li {
  position: relative;
}

.markdown-body .footnotes li:target::before {
  position: absolute;
  top: -8px;
  right: -8px;
  bottom: -8px;
  left: -24px;
  pointer-events: none;
  content: "";
  border: 2px solid var(--color-accent-emphasis);
  border-radius: 6px;
}

.markdown-body .footnotes li:target {
  color: var(--color-fg-default);
}

.markdown-body .footnotes .data-footnote-backref g-emoji {
  font-family: monospace;
}

.markdown-body .pl-c {
  color: var(--color-prettylights-syntax-comment);
}

.markdown-body .pl-c1,
.markdown-body .pl-s .pl-v {
  color: var(--color-prettylights-syntax-constant);
}

.markdown-body .pl-e,
.markdown-body .pl-en {
  color: var(--color-prettylights-syntax-entity);
}

.markdown-body .pl-smi,
.markdown-body .pl-s .pl-s1 {
  color: var(--color-prettylights-syntax-storage-modifier-import);
}

.markdown-body .pl-ent {
  color: var(--color-prettylights-syntax-entity-tag);
}

.markdown-body .pl-k {
  color: var(--color-prettylights-syntax-keyword);
}

.markdown-body .pl-s,
.markdown-body .pl-pds,
.markdown-body .pl-s .pl-pse .pl-s1,
.markdown-body .pl-sr,
.markdown-body .pl-sr .pl-cce,
.markdown-body .pl-sr .pl-sre,
.markdown-body .pl-sr .pl-sra {
  color: var(--color-prettylights-syntax-string);
}

.markdown-body .pl-v,
.markdown-body .pl-smw {
  color: var(--color-prettylights-syntax-variable);
}

.markdown-body .pl-bu {
  color: var(--color-prettylights-syntax-brackethighlighter-unmatched);
}

.markdown-body .pl-ii {
  color: var(--color-prettylights-syntax-invalid-illegal-text);
  background-color: var(--color-prettylights-syntax-invalid-illegal-bg);
}

.markdown-body .pl-c2 {
  color: var(--color-prettylights-syntax-carriage-return-text);
  background-color: var(--color-prettylights-syntax-carriage-return-bg);
}

.markdown-body .pl-sr .pl-cce {
  font-weight: bold;
  color: var(--color-prettylights-syntax-string-regexp);
}

.markdown-body .pl-ml {
  color: var(--color-prettylights-syntax-markup-list);
}

.markdown-body .pl-mh,
.markdown-body .pl-mh .pl-en,
.markdown-body .pl-ms {
  font-weight: bold;
  color: var(--color-prettylights-syntax-markup-heading);
}

.markdown-body .pl-mi {
  font-style: italic;
  color: var(--color-prettylights-syntax-markup-italic);
}

.markdown-body .pl-mb {
  font-weight: bold;
  color: var(--color-prettylights-syntax-markup-bold);
}

.markdown-body .pl-md {
  color: var(--color-prettylights-syntax-markup-deleted-text);
  background-color: var(--color-prettylights-syntax-markup-deleted-bg);
}

.markdown-body .pl-mi1 {
  color: var(--color-prettylights-syntax-markup-inserted-text);
  background-color: var(--color-prettylights-syntax-markup-inserted-bg);
}

.markdown-body .pl-mc {
  color: var(--color-prettylights-syntax-markup-changed-text);
  background-color: var(--color-prettylights-syntax-markup-changed-bg);
}

.markdown-body .pl-mi2 {
  color: var(--color-prettylights-syntax-markup-ignored-text);
  background-color: var(--color-prettylights-syntax-markup-ignored-bg);
}

.markdown-body .pl-mdr {
  font-weight: bold;
  color: var(--color-prettylights-syntax-meta-diff-range);
}

.markdown-body .pl-ba {
  color: var(--color-prettylights-syntax-brackethighlighter-angle);
}

.markdown-body .pl-sg {
  color: var(--color-prettylights-syntax-sublimelinter-gutter-mark);
}

.markdown-body .pl-corl {
  text-decoration: underline;
  color: var(--color-prettylights-syntax-constant-other-reference-link);
}

.markdown-body g-emoji {
  display: inline-block;
  min-width: 1ch;
  font-family: "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
  font-size: 1em;
  font-style: normal !important;
  font-weight: var(--base-text-weight-normal, 400);
  line-height: 1;
  vertical-align: -0.075em;
}

.markdown-body g-emoji img {
  width: 1em;
  height: 1em;
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item label {
  font-weight: var(--base-text-weight-normal, 400);
}

.markdown-body .task-list-item.enabled label {
  cursor: pointer;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 4px;
}

.markdown-body .task-list-item .handle {
  display: none;
}

.markdown-body .task-list-item-checkbox {
  margin: 0 .2em .25em -1.4em;
  vertical-align: middle;
}

.markdown-body .contains-task-list:dir(rtl) .task-list-item-checkbox {
  margin: 0 -1.6em .25em .2em;
}

.markdown-body .contains-task-list {
  position: relative;
}

.markdown-body .contains-task-list:hover .task-list-item-convert-container,
.markdown-body .contains-task-list:focus-within .task-list-item-convert-container {
  display: block;
  width: auto;
  height: 24px;
  overflow: visible;
  clip: auto;
}

.markdown-body ::-webkit-calendar-picker-indicator {
  filter: invert(50%);
}

.markdown-body .markdown-alert {
  padding: var(--base-size-8, 8px) var(--base-size-16, 16px);
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid var(--color-border-default);
}

.markdown-body .markdown-alert>:first-child {
  margin-top: 0;
}

.markdown-body .markdown-alert>:last-child {
  margin-bottom: 0;
}

.markdown-body .markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: var(--base-text-weight-medium, 500);
  align-items: center;
  line-height: 1;
}

.markdown-body .markdown-alert.markdown-alert-note {
  border-left-color: var(--color-accent-emphasis);
}

.markdown-body .markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-accent-fg);
}

.markdown-body .markdown-alert.markdown-alert-important {
  border-left-color: var(--color-done-emphasis);
}

.markdown-body .markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-done-fg);
}

.markdown-body .markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-attention-emphasis);
}

.markdown-body .markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-attention-fg);
}

.markdown-body .markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-success-emphasis);
}

.markdown-body .markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-success-fg);
}

.markdown-body .markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-danger-emphasis);
}

.markdown-body .markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-danger-fg);
}
</style><title>README</title></head><body><article class="markdown-body"><div class="markdown-heading"><h1 class="heading-element">Advanced Charging Controller (ACC)</h1><a id="user-content-advanced-charging-controller-acc" class="anchor" aria-label="Permalink: Advanced Charging Controller (ACC)" href="#advanced-charging-controller-acc"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<hr>
<ul>
<li><a href="#description">DESCRIPTION</a></li>
<li><a href="#license">LICENSE</a></li>
<li><a href="#disclaimer">DISCLAIMER</a></li>
<li><a href="#warnings">WARNINGS</a></li>
<li><a href="#donations">DONATIONS</a></li>
<li><a href="#prerequisites">PREREQUISITES</a></li>
<li>
<a href="#quick-start-guide">QUICK START GUIDE</a>
<ul>
<li><a href="#notes">Notes</a></li>
</ul>
</li>
<li>
<a href="#building-andor-installing-from-source">BUILDING AND/OR INSTALLING FROM SOURCE</a>
<ul>
<li><a href="#dependencies-build">Dependencies (Build)</a></li>
<li>
<a href="#build-tarballs-and-flashable-zips">Build Tarballs and Flashable Zips</a>
<ul>
<li><a href="#notes-1">Notes</a></li>
</ul>
</li>
<li>
<a href="#install-from-local-source-or-github">Install from Local Source or GitHub</a>
<ul>
<li><a href="#notes-2">Notes</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#default-configuration">DEFAULT CONFIGURATION</a></li>
<li>
<a href="#setupusage">SETUP/USAGE</a>
<ul>
<li><a href="#terminal-commands">Terminal Commands</a></li>
</ul>
</li>
<li><a href="#plugins">PLUGINS</a></li>
<li>
<a href="#notestips-for-front-end-developers">NOTES/TIPS FOR FRONT-END DEVELOPERS</a>
<ul>
<li><a href="#basics">Basics</a></li>
<li><a href="#installingupgrading-acc">Installing/Upgrading ACC</a></li>
<li><a href="#uninstalling-acc">Uninstalling ACC</a></li>
<li><a href="#initializing-acc">Initializing ACC</a></li>
<li><a href="#managing-acc">Managing ACC</a></li>
</ul>
</li>
<li>
<a href="#troubleshooting">TROUBLESHOOTING</a>
<ul>
<li><a href="#acc--t-results-seem-inconsistent"><code>acc -t</code> Results Seem Inconsistent</a></li>
<li><a href="#charging-switch">Charging Switch</a></li>
<li><a href="#custom-max-charging-voltage-and-current-limits">Custom Max Charging Voltage And Current Limits</a></li>
<li><a href="#diagnosticslogs">Diagnostics/Logs</a></li>
<li><a href="#finding-additionalpotential-charging-switches-quickly">Finding Additional/Potential Charging Switches Quickly</a></li>
<li><a href="#install-upgrade-stop-and-restart-processes-seem-to-take-too-long">Install, Upgrade, Stop and Restart Processes Seem to Take Too Long</a></li>
<li><a href="#restore-default-config">Restore Default Config</a></li>
<li><a href="#samsung-charging-always-stops-at-70-capacity">Samsung, Charging <em>Always</em> Stops at 70% Capacity</a></li>
<li><a href="#slow-charging">Slow Charging</a></li>
<li><a href="#unable-to-charge">Unable to Charge</a></li>
<li><a href="#unexpected-reboots">Unexpected Reboots</a></li>
<li><a href="#warp-vooc-and-other-fast-charging-tech">WARP, VOOC and Other Fast Charging Tech</a></li>
<li><a href="#why-did-accd-stop">Why Did accd Stop?</a></li>
</ul>
</li>
<li><a href="#power-supply-logs-help-needed">POWER SUPPLY LOGS (HELP NEEDED)</a></li>
<li><a href="#localization">LOCALIZATION</a></li>
<li>
<a href="#tips">TIPS</a>
<ul>
<li><a href="#always-limit-the-charging-current-if-your-battery-is-old-andor-tends-to-discharge-too-fast"><em>Always</em> Limit the Charging Current If Your Battery is Old and/or Tends to Discharge Too Fast</a></li>
<li><a href="#generic">Generic</a></li>
<li><a href="#google-pixel-devices">Google Pixel Devices</a></li>
<li><a href="/home/v/Downloads/git/acc/override_battery_mah_capacity">Override Battery mAh Capacity</a></li>
<li><a href="/home/v/Downloads/git/acc/override_broken_temperature_sensor">Override Broken Temperature Sensor</a></li>
</ul>
</li>
<li><a href="#frequently-asked-questions-faq">FREQUENTLY ASKED QUESTIONS (FAQ)</a></li>
<li><a href="#links">LINKS</a></li>
</ul>
<hr>
<div class="markdown-heading"><h2 class="heading-element">DESCRIPTION</h2><a id="user-content-description" class="anchor" aria-label="Permalink: DESCRIPTION" href="#description"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>ACC is an Android software mainly intended for <a href="https://batteryuniversity.com/article/bu-808-how-to-prolong-lithium-based-batteries" rel="nofollow">extending battery service life</a>.
In a nutshell, this is achieved through limiting charging current, temperature and voltage.
Any root solution is supported.
Regardless of whether the system is rooted with KernelSU/Magisk, the installation is always "systemless".</p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">LICENSE</h2><a id="user-content-license" class="anchor" aria-label="Permalink: LICENSE" href="#license"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Copyright 2017-2024, VR25</p>
<p>This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License
along with this program. If not, see <a href="https://www.gnu.org/licenses/" rel="nofollow">https://www.gnu.org/licenses/</a>.</p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">DISCLAIMER</h2><a id="user-content-disclaimer" class="anchor" aria-label="Permalink: DISCLAIMER" href="#disclaimer"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Always read/reread this reference prior to installing/upgrading this software.</p>
<p>While no cats have been harmed, the author assumes no responsibility for anything that might break due to the use/misuse of it.</p>
<p>To prevent fraud, do NOT mirror any link associated with this project.
Do NOT share builds (tarballs/zips)! Share official links instead.</p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">WARNINGS</h2><a id="user-content-warnings" class="anchor" aria-label="Permalink: WARNINGS" href="#warnings"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>ACC manipulates Android low level (<a href="https://duckduckgo.com/lite/?q=kernel+android" rel="nofollow">kernel</a>) parameters which control the charging circuitry.
The author assumes no responsibility under anything that might break due to the use/misuse of this software.
By choosing to use/misuse it, you agree to do so at your own risk!</p>
<p>Some devices, notably from Xiaomi (e.g., Poco X3 Pro), have a faulty PMIC (Power Management Integrated Circuit) that can be triggered by acc.
The issue blocks charging.
Ensure the battery does not discharge too low.
Using acc's auto shutdown feature is highly recommended (default shutdown_capacity is 5).</p>
<p>Refer to <a href="https://forum.xda-developers.com/t/rom-official-arrowos-11-0-android-11-0-vayu-bhima.4267263/post-85119331" rel="nofollow">this XDA post</a> for additional details.</p>
<p><a href="https://github.com/lybxlpsv">lybxlpsv</a> suggests booting into bootloader/fastboot and then back into system to reset the PMIC.</p>
<p>In case of bootloop, one can easily generate persistent logs and/or stop/disable acc.
ACC daemon initializes 60 seconds after the boot animation stops.
This gives plenty of time to run <code>pkill -9 -f accd</code> to kill the waiting process or <code>accd -x</code> to generate persistent logs (<code>/sdcard/accd-*.log</code>) for debugging the bootloop.
<code>accd -x</code> also sets the disable flag (<code>/data/adb/vr25/acc-data/disable</code>). This file prevents the daemon from starting again. It's removed manually or by the installer.
<code>acc -t</code> always implies <code>-x</code> and tries to auto-blacklist switches that trigger unwanted reboots.</p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">DONATIONS</h2><a id="user-content-donations" class="anchor" aria-label="Permalink: DONATIONS" href="#donations"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Please, support the project with donations (<a href="#links">links</a> at the bottom).
As the project gets bigger and more popular, the need for coffee goes up as well.</p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">PREREQUISITES</h2><a id="user-content-prerequisites" class="anchor" aria-label="Permalink: PREREQUISITES" href="#prerequisites"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<ul>
<li><a href="https://batteryuniversity.com/article/bu-808-how-to-prolong-lithium-based-batteries" rel="nofollow">Must read - how to prolong lithium ion batteries lifespan</a></li>
<li>Android or KaiOS</li>
<li>Any root solution (e.g., KernelSU, Magisk, SuperSU, etc)</li>
<li>
<a href="https://github.com/Magisk-Modules-Repo/busybox-ndk">Busybox*</a> (only if not rooted with KernelSU or Magisk)</li>
<li>Non KernelSU/Magisk installs require a way of running <code>/data/adb/vr25/acc/service.sh</code> on boot to initialize acc.</li>
<li>Terminal emulator</li>
<li>Root text editor (optional)</li>
</ul>
<p>* A busybox binary can simply be placed in <code>/data/adb/vr25/bin/</code>.
Permissions (<code>0755</code>) are set automatically, as needed.
Precedence: /data/adb/vr25/bin/busybox &gt; KernelSu's or Magisk's busybox &gt; system's busybox</p>
<p>Other executables or static binaries can also be placed in <code>/data/adb/vr25/bin/</code> (with proper permissions) instead of being installed system-wide.</p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">QUICK START GUIDE</h2><a id="user-content-quick-start-guide" class="anchor" aria-label="Permalink: QUICK START GUIDE" href="#quick-start-guide"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<ol start="0">
<li>
<p>All commands/actions require root.</p>
</li>
<li>
<p>Install/upgrade: flash* the zip or use a front-end app.
There are two additional ways of upgrading: <code>acc --upgrade</code> (online) and <code>acc --flash</code> (zip flasher).
Rebooting after installation/removal is generally unnecessary.
Manual uninstall before upgrade is unnecessary.</p>
</li>
<li>
<p>[Optional] run <code>acc</code> (wizard). That's the main command to remember.</p>
</li>
<li>
<p>[Optional] run <code>acc pause_capacity resume_capacity</code> (default <code>75 70</code>) to set the battery levels at which charging should pause and resume, respectively.</p>
</li>
<li>
<p>If you come across any issues, refer to the <a href="#troubleshooting">troubleshooting</a>, <a href="#tips">tips</a> and <a href="#frequently-asked-questions-faq">FAQ</a> sections below.
Read as much as you can, prior to reporting issues and/or asking questions.
Oftentimes, solutions/answers will be right before your eyes.</p>
</li>
</ol>
<div class="markdown-heading"><h3 class="heading-element">Notes</h3><a id="user-content-notes" class="anchor" aria-label="Permalink: Notes" href="#notes"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Steps <code>2</code> and <code>3</code> are optional because there are default settings.
For details, refer to the <a href="#default-configuration">default configuration</a> section below.
Users are encouraged to try step <code>2</code> - to familiarize themselves with the available options.</p>
<p>Settings can be overwhelming. Start with what you understand.
The default configuration has you covered.
Don't ever feel like you have to configure everything. You probably shouldn't anyway - unless you really know what you're doing.</p>
<p>Uninstall: run <code>acc --uninstall</code> or flash* <code>/data/adb/vr25/acc-data/acc-uninstaller.zip</code>.</p>
<p>ACC runs in some recovery environments as well.
Unless the zip is flashed again, manual initialization is required.
The initialization script is <code>/data/adb/vr25/acc/service.sh</code>.</p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">BUILDING AND/OR INSTALLING FROM SOURCE</h2><a id="user-content-building-andor-installing-from-source" class="anchor" aria-label="Permalink: BUILDING AND/OR INSTALLING FROM SOURCE" href="#building-andor-installing-from-source"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">Dependencies (Build)</h3><a id="user-content-dependencies-build" class="anchor" aria-label="Permalink: Dependencies (Build)" href="#dependencies-build"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<ul>
<li>git, wget, or curl (pick one)</li>
<li>zip</li>
</ul>
<div class="markdown-heading"><h3 class="heading-element">Build Tarballs and Flashable Zips</h3><a id="user-content-build-tarballs-and-flashable-zips" class="anchor" aria-label="Permalink: Build Tarballs and Flashable Zips" href="#build-tarballs-and-flashable-zips"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<ol>
<li>
<p>Download and extract the source code: <code>git clone https://github.com/VR-25/acc.git</code>
or <code>wget  https://github.com/VR-25/acc/archive/master.tar.gz -O - | tar -xz</code>
or <code>curl -L#  https://github.com/VR-25/acc/archive/master.tar.gz | tar -xz</code></p>
</li>
<li>
<p><code>cd acc*</code></p>
</li>
<li>
<p><code>sh build.sh</code> (or double-click <code>build.bat</code> on Windows 10+, if you have Windows subsystem for Linux (with zip) installed)</p>
</li>
</ol>
<div class="markdown-heading"><h4 class="heading-element">Notes</h4><a id="user-content-notes-1" class="anchor" aria-label="Permalink: Notes" href="#notes-1"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<ul>
<li>
<p><code>build.sh</code> automatically sets/corrects <code>id=*</code> in <code>*.sh</code> and <code>update-binary</code> files.
To skip generating archives, run the build script with a random argument (e.g. <code>sh build.sh h</code>).</p>
</li>
<li>
<p>To update the local source code, run <code>git pull --force</code> or re-download it (with <code>wget</code>/<code>curl</code>) as described above.</p>
</li>
</ul>
<div class="markdown-heading"><h3 class="heading-element">Install from Local Source or GitHub</h3><a id="user-content-install-from-local-source-or-github" class="anchor" aria-label="Permalink: Install from Local Source or GitHub" href="#install-from-local-source-or-github"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<ul>
<li>
<p><code>[export installDir=&lt;parent install dir&gt;] sh install.sh</code> installs acc from the extracted source.</p>
</li>
<li>
<p><code>sh install-online.sh [-c|--changelog] [-f|--force] [-k|--insecure] [-n|--non-interactive] [%parent install dir%] [commit]</code> downloads and installs acc from GitHub - e.g., <code>sh install-online.sh dev</code>.
The order of arguments doesn't matter.
For upgrades, if <code>%parent install dir%</code> is not supplied, the original/current is used.</p>
</li>
<li>
<p><code>sh install-tarball.sh [module id, default: acc] [parent install dir (e.g., /data/data/mattecarra.accapp/files)]</code> installs the tarball (<code>acc*gz</code>) from the script's location.
The archive must be in the same directory as this script - and obtained from GitHub: <a href="https://github.com/VR-25/acc/archive/$commit.tar.gz">https://github.com/VR-25/acc/archive/$commit.tar.gz</a> (<code>$commit</code> examples: <code>master</code>, <code>dev</code>, <code>v2020.5.20-rc</code>).</p>
</li>
<li>
<p>One can also use a single command to download and install acc:</p>
</li>
</ul>
<p><code>curl -sSL https://raw.githubusercontent.com/VR-25/acc/dev/install-online.sh | /system/bin/sh -s dev</code></p>
<p><code>wget -qO- https://raw.githubusercontent.com/VR-25/acc/dev/install-online.sh | /system/bin/sh -s dev</code></p>
<div class="markdown-heading"><h4 class="heading-element">Notes</h4><a id="user-content-notes-2" class="anchor" aria-label="Permalink: Notes" href="#notes-2"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<ul>
<li>
<p><code>install-online.sh</code> is the <code>acc --upgrade</code> back-end.</p>
</li>
<li>
<p>The default parent installation directories, in order of priority, are: <code>/data/data/mattecarra.accapp/files/</code> (ACC App, but only for non KernelSU/Magisk installs), <code>/data/adb/modules/</code> (KernelSU/Magisk) and <code>/data/adb/vr25/</code> (other root solutions).</p>
</li>
<li>
<p>No argument/option is strictly mandatory.
The exception is <code>--non-interactive</code> for front-end apps.</p>
</li>
<li>
<p>The <code>--force</code> option to <code>install-online.sh</code> is meant for re-installation and downgrading.</p>
</li>
<li>
<p><code>sh install-online.sh --changelog --non-interactive</code> prints the version code (integer) and changelog URL (string) when an update is available.
In interactive mode, it also asks the user whether they want to download and install the update.</p>
</li>
<li>
<p>You may also want to read <a href="#terminal-commands">Terminal Commands</a> &gt; <code>Exit Codes</code> below.</p>
</li>
</ul>
<hr>
<div class="markdown-heading"><h2 class="heading-element">DEFAULT CONFIGURATION</h2><a id="user-content-default-configuration" class="anchor" aria-label="Permalink: DEFAULT CONFIGURATION" href="#default-configuration"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<pre><code>#DC#

configVerCode=202505180

allowIdleAbovePcap=true
ampFactor=
battStatusWorkaround=true
capacity=(5 101 70 75 false)
cooldownCurrent=
cooldownRatio=()
currentWorkaround=false
forceOff=false
language=en
offMid=true
prioritizeBattIdleMode=true
rebootResume=false
resetBattStats=(false false false)
temperature=(45 50 40 55)
tempLevel=0
voltFactor=

applyOnBoot=()

applyOnPlug=()

battStatusOverride=''

chargingSwitch=()

idleApps=()

maxChargingCurrent=()

maxChargingVoltage=()

runCmdOnPause=''



# SYNTAX

# allowIdleAbovePcap=true|false
# ampFactor=1000|1000000
# applyOnBoot=([CTRL_FILE1::RAW_VALUE[::DEFAULT]] [CTRL_FILE2::RAW_VALUE[::DEFAULT]...] [--exit])
# applyOnPlug=([CTRL_FILE1::RAW_VALUE[::DEFAULT]] [CTRL_FILE2::RAW_VALUE[::DEFAULT]...])
# battStatusOverride=Idle|Discharging|'code to PRINT value for _status'
# battStatusWorkaround=true|false
# capacity=(shutdown_capacity=% cooldown_capacity=% resume_capacity=% pause_capacity=% capacity_mask=true|false)
# chargingSwitch=([CTRL_FILE1 ON OFF [CTRL_FILE2 ON OFF...] [--]])
# cooldownCurrent=mA|mA%
# cooldownRatio=(cooldown_charge=seconds cooldown_pause=seconds)
# currentWorkaround=true|false
# forceOff=true|false
# idleApps=(comma or space-separated patterns matching Android package names)
# language=LANGUAGE_CODE
# maxChargingCurrent=(MILLIAMPS [CTRL_FILE1::RAW_VALUE::DEFAULT CTRL_FILE2::RAW_VALUE::DEFAULT...])
# maxChargingVoltage=(MILLIVOLTS [CTRL_FILE1::RAW_VALUE::DEFAULT CTRL_FILE2::RAW_VALUE::DEFAULT...] [--exit])
# offMid=true|false
# prioritizeBattIdleMode=true|false|no
# rebootResume=true|false
# resetBattStats=(reset_batt_stats_on_pause=true|false reset_batt_stats_on_unplug=true|false reset_batt_stats_on_plug=true|false)
# runCmdOnPause='COMMAND...'
# temperature=(cooldown_temp=C max_temp=C resume_temp=C shutdown_temp=C)
# tempLevel=%
# voltFactor=1000|1000000



# NOTES

# Do not edit this in Windows Notepad, ever!
# It replaces LF (Linux/Unix) with CRLF (Windows) line endings.

# Nullifying values that should not be null causes unexpected behavior.
# However, doing it with "--set var=" restores the default value of "var".
# In other words, for regular users, "--set" is safer than modifying the config file directly.

# Do not feel like you must configure everything!
# Do not change what you don't understand.

# The daemon does not have to be restarted to apply changes. It picks them up automatically within seconds.



# INTERNAL FUNCTIONS

# at HH:MM command1, commmand2...   scheduler
# e.g.,
#   at 2:14 acc --notif 2:14 AM now\!
#   at 22:30 acc -n 22:30 now\!

# batt_cap   print battery level

# calc &lt;operation...&gt;   float  calculator

# set_temp_level &lt;0-100&gt;   refer to temp_level (tl) below

# voltage_now   prints the instantaneous charging voltage



# INTERNAL VARIABLES

# $_DPOL  discharge polarity (+|-)
# $_status   Charging|Discharging|Idle
# $_STI   switch test iterations (default: 35)
# $batt   expands to the /sys/class/power_supply/battery (or equivalent) directory
# $battCapacity   $batt/capacity file
# $battStatus   $batt/status file
# $currFile   current_now file
# $idleThreshold   mA absolute value to consider charging status=Idle (default: 10)
# $temp   temperature reporting file
# ${isAccd:-false}   true|false (whether accd in running)



# The "date" command
# $(date +FORMAT)
# FORMAT specifies display format string using strftime(3) syntax:

# %% literal %             %n newline              %t tab
# %S seconds (00-60)       %M minute (00-59)       %m month (01-12)
# %H hour (0-23)           %I hour (01-12)         %p AM/PM
# %y short year (00-99)    %Y year                 %C century
# %a short weekday name    %A weekday name         %u day of week (1-7, 1=mon)
# %b short month name      %B month name           %Z timezone name
# %j day of year (001-366) %d day of month (01-31) %e day of month ( 1-31)
# %N nanosec (output only)

# %U Week of year (0-53 start sunday)   %W Week of year (0-53 start monday)
# %V Week of year (1-53 start monday, week &lt; 4 days not part of this year)

# %F "%Y-%m-%d"     %R "%H:%M"        %T "%H:%M:%S"    %z numeric timezone
# %D "%m/%d/%y"     %r "%I:%M:%S %p"  %h "%b"          %s unix epoch time
# %x locale date    %X locale time    %c locale date/time



# ALIASES (for use with --set only)

# allow_idle_above_pcap aiapc
# amp_factor af
# apply_on_boot ab
# apply_on_plug ap
# batt_status_override bso
# batt_status_workaround bsw
# capacity_mask cm
# charging_switch s
# cooldown_capacity cc
# cooldown_charge cch
# cooldown_current cdc
# cooldown_pause cp
# cooldown_temp ct
# current_workaround cw
# force_off fo
# idle_apps ia
# lang l
# max_charging_current mcc
# max_charging_voltage mcv
# max_temp mt
# resume_temp rt
# off_mid om
# pause_capacity pc
# prioritize_batt_idle_mode pbim
# reboot_resume rr
# reset_batt_stats_on_pause rbsp
# reset_batt_stats_on_plug rbspl
# reset_batt_stats_on_unplug rbsu
# resume_capacity rc
# run_cmd_on_pause rcp
# shutdown_capacity sc
# shutdown_temp st
# temp_level tl
# volt_factor vf



# FINE, BUT WHAT DOES EACH OF THESE VARIABLES ACTUALLY MEAN?


# configVerCode #
# This is checked during updates to determine whether the config should be patched. Do NOT modify.
# The value is not necessarily the same as acc's version code.


# allow_idle_above_pcap (aiapc) #
#
# Type: Boolean
# Default: true
#
# If set to false, accd will avoid idle mode (if possible) when capacity &gt; pause_capacity.
# This is useful for forever-plugged setups, where battery longevity is a top priority.
# Idle mode is good, but "storing" a highly charged battery for a LONG time is a bad idea.
# The recommended capacity range for long-term/forever-plugged is 40-60%.


# amp_factor (af) # volt_factor (vf) #
#
# Type: Integer (usually 1000000 or 1000)
# Defaults: Null
#
# Unit multiplier for conversion (e.g., 1V = 1000000uV, 1A = 1000000mA).
# ACC can automatically determine the units, but the mechanism is not 100% foolproof.
# Leave those properties alone, unless acc -i misreports current/voltage values.


# apply_on_boot (ab) # apply_on_plug (ap) #
#
# Type: String (CTRL_FILE1::VALUE::DEFAULT CTRL_FILE2::VALUE::DEFAULT... --exit)
# Default: Null
#
# e.g., acc -s ab=wireless/voltage_max::9000000 (forces fast wireless charging on Pixel devices)
#
# This is for general kernel tweaking.
# For ab, settings are applied on boot and on daemon start/restart.
# For ap, settings are applied periodically, while charging.
#
# Default values (optional) are restored when the daemon stops.
# "--exit" (for ab only) instructs accd to stop after applying settings.


# batt_status_override (bso) #
#
# Type: String (Idle|Discharging|'code to PRINT value for _status')
# Default: Null
#
# Overrides the battery status determined by the not_charging function.
# It can be Idle, Discharging (both case sensitive), or a script to PRINT the desired value for the _status variable.
# When it's Idle or Discharging, _status will be set to that value if the charging switch state is off.
# This only works in conjunction with an enforced charging switch (set manually, has a trailing " --").
#
# Usage scenario: the switch "main/cool_mode 0 1" supports idle mode. However, sometimes it doesn't respond soon enough (e.g., due to fast charging).
# The user can then enforce it with "acc -ss" and set "batt_status_override=Idle".
# This means, when "main/cool_mode" is "on" (0), _status will be determined by the not_charging function (as usual), but when it's off (1), _status will be Idle, overriding the not_charging function's logic.
#
# If the user were to write their own logic, it would be something like the following:
# batt_status_override='[ $(cat main/cool_mode) -eq 1 ] &amp;&amp; printf Idle || :'
# The "|| :" part is mandatory to avoid issues with "set -e", which acc uses extensively.


# batt_status_workaround (bsw) #
#
# Type: Boolean
# Default: true
#
# With this enabled (true), in addition to just reading POWER_SUPPLY_STATUS, if the battery is "Charging" and current is within 40mA (inclusive), battery status is considered "Idle".
# Status is considered "Discharging", if the current's polarity changes after calling the disable_charging function.
# By not relying solely on the information provided by POWER_SUPPLY_STATUS, this approach dramatically boosts compatibility.
# This must be disabled on systems that report wrong/misleading charging current values.


# capacity_mask (cm) #
#
# Type: Boolean
# Default: false
#
# This forces Android to report "capacity = (capacity - shutdown _capacity) * 100 / (pause_capacity - shutdown_capacity)", effectively masking capacity limits.
# It also prevents Android from getting capacity readings below 2%, since some systems shutdown before battery level actually drops to 0%.
# Use case: Secretly install acc on a relative's device, and enable this, so that they always see the regular 0-100% battery level scale.


# charging_switch (s) #
#
# Type: String (CTRL_FILE1 ON OFF CTRL_FILE2 ON OFF... --)
# Default: Null (automatic)
#
# If unset, acc cycles through its database and sets the first switch/group that successfully disables charging.
# If later, the set switch/group fails 3 times in a row, acc unsets it, moves it to the end of the list and repeats the above.
# If all switches fail to disable charging, chargingSwitch is unset and acc/d exit with code 7.
#
# This automated process can be disabled by appending " --" to the switch/group.
# e.g., acc -s s="battery/charging_enabled 1 0 --"
# "acc -ss" always appends " --".
#
# Certain switches tend to be problematic/unreliable under specific condition (e.g., screen off, fast charging, heavy load).
# Sometimes, this is caused by rogue thermal management programs (e.g., mi_thermald).
# To mitigate this, one may want to try force_off or a thermal mod.


# cooldown_capacity (cc) #
#
# Type: Integer (percentage)
# Default: 101
#
# Battery level or millivolts at which the cooldown cycle starts.
# Cooldown reduces battery stress induced by prolonged exposure to high temperature and high charging voltage.
# It does so through periodically pausing charging for a few seconds (cooldown_pause, more details below).
# Requires cooldown_current OR "cooldown_charge and cooldown_pause".


# cooldown_charge (cch) # cooldown_pause (cp) #
#
# Type: Integer (seconds)
# Defaults: null
#
# Those dictate the cooldown cycle intervals (seconds).
# When not set, the cycle is disabled.
# Suggested values are cch=50 and cp=10.
# If charging gets slower than desired, try cch=50 and cp=5.
# Note that cooldown_capacity and cooldown_temp can be disabled individually by assigning them values that would never be reached under normal circumstances.
# cooldown_current optionally works with ratios as well (cooldown_charge: regular current, cooldown_pause: cooldown_current).


# cooldown_current (cdc) #
#
# Type: Integer (milliamps)
# Default: Null
#
# Instead of pausing charging for cooldown_pause seconds, limit the max charging current (e.g., to 500 (mA) or even 50% (of the max current).
# cooldown_pause and cooldown_charge are optional.
# When the value is a percentage, temp_level is used as back-end, rather than the regular current control logic.


# cooldown_temp (ct) #
#
# Type: Integer (C)
# Default: 45
#
# Temperature (C) at which the cooldown cycle starts.
# Cooldown reduces the battery degradation rate by lowering the device's temperature.
# Requires cooldown_current OR "cooldown_charge and cooldown_pause".


# current_workaround (cw) #
#
# Type: Boolean
# Default: false
#
# If set to true, acc only uses current control files whose paths match "batt".
# This is necessary only if the current limit affects both input and charging current values.
# Enable if low current values don't work.


# force_off (fo) #
#
# Type: Boolean
# Default: false
#
# Enable this only as last resort, if the set charging switch is stubbornly reset by the system.
# Oftentimes, userspace thermal management daemons (e.g., mi_thermald) and/or driver bugs are behind charging control issues.


# idle_apps (ia) #
#
# Type: String
# Default: Null
#
# This is a list of comma or space-separated patterns matching Android package names.
# When a matched app is running in the foreground, acc daemon enables idle mode.
# e.g., acc -s ia=maps,codm,pokemon


# lang (l) #
#
# Type: String
# Default: en
#
# Display language, when null, English (en) is assumed.
# WARNING: Current translations are poor/outdated.


# max_charging_current (mcc) # max_charging_voltage (mcv) #
#
# Type: Integer (milliamps/millivolts)
# Defaults: Null
#
# Control files are automatically added by accd when the array has just one element (the milliamps/millivolts value).
# If the second element of the array (array[1]) starts with "-", accd recognizes it as an instruction to update the control files.
# This is useful for setting/changing current and voltage limits without a frontend (--set or app).
# Simply put, if the user has the following in their config, accd automatically adds/updates the control files:
#   maxChargingCurrent=(1000) # Control files will be added.
#   maxChargingVoltage=(4000 -battery/voltage_max bms/voltage_max) # Control files will be updated. The "-" is mandatory after changing the value (first element). Otherwise, the change has no effect.
#
# Notes: The maximum current that can be set via dedicated commands is 9999 mA. For voltage, the max is 4300 mV. One can override those by editing the config directly. When the charging current value is a percentage, temp_level is used as back-end, rather than the regular current control logic.


# max_temp (mt) # resume_temp (rt) #
#
# Type: Integer (C)
# Defaults: mt=50, rt=40
#
# Those two work together and are NOT tied to the cooldown cycle.
# At max_temp, charging is paused.
# If charging is paused due to capacity &gt;= pause_capacity, it resumes when capacity &lt;= resume_capacity AND temp &lt;= max_temp.
# If charging is paused due to temp &gt;= max_temp, it resumes when capacity &lt; pause_capacity AND temp &lt;= resume_temp


# off_mid (om) #
#
# Type: Boolean
# Default: true
#
# Whether to turn off charging after rebooting the system or restarting accd, if capacity is within resume_capacity and pause_capacity.


# one-line scripts #
#
# Type: String
# Default: Null
#
# Every line that begins with ":" is interpreted as a shell script.
# This feature can be useful for many things, including setting up persistent config profiles (i.e., source a file that overrides the main config).
# All script lines are executed whenever the config is loaded/sourced.
# This happens regularly while the daemon is running, and at least once per command run.
#
# Note: Due to user data encryption, files used in one-line scripts must reside somewhere in /data/adb/, just like acc's own data files.
# Ignore if your data isn't encrypted.
#
# Tip: One can schedule tasks with the following construct:
# : sleep profile; at 22:00 acc -s pc=50 mcc=500 mcv=3900, acc -n Switched to night profile
#
# WARNING: All scripts must always return zero. Appending "|| :" ensures that.


# pause_capacity (pc) # resume_capacity (rc) #
#
# Type: Integer (percentage)
# Defaults: pc=75, rc=70
#
# Battery level or millivolts at which charging shall be paused/resumed.


# prioritize_batt_idle_mode (pbim) #
#
# Type: Boolean | String (pbim=no)
# Default: true
#
# Battery idle mode, also called "standby mode" or "charging bypass", is the ability of running off the charger, as if the battery were disconnected from the device.
# Not all devices support this, but there's also emulated idle mode (refer to the readme), which works on all devices.
#
# If enabled, charging switches that support battery idle mode take precedence.
# This is only relevant when the switch is automatically determined -- i.e., charging_switch is not set or it has no trailing " --".
# In other words, this variable is only used when acc is automatically testing charging switches.
# When set to "no", it has the opposite effect (prioritize non-idle mode).


# reboot_resume (rr) #
#
# Type: Boolean
# Default: false
#
# Reboot (when capacity capacity is at or below resume_capacity) to re-enable charging.
# This is only for devices whose switches can't re-enable charging.
# A warning Android notification is posted 60 seconds prior, for the user to block the action, if they so please.


# reset_batt_stats_on_pause (rbsp) # reset_batt_stats_on_plug (rbspl) # reset_batt_stats_on_unplug (rbsu) #
#
# Type: Boolean
# Default: false
#
# Reset battery stats after a given event.


# run_cmd_on_pause (rcp) #
#
# Type: String
# Default: Null
#
# Run commands* after pausing charging.
# * Usually a script ("sh some_file" or ". some_file")


# shutdown_capacity (sc) #
#
# Type: Integer (percentage)
# Default: 5
#
# When the battery is discharging, its level/millivolts is at or below shutdown_capacity, and the device has been running for 15 minutes or more, acc daemon turns the device off to reduce the discharge rate, and protect the battery from potential damage, induced by voltage below the operating range.
# A value less than 1 disables it.
# An Android warning notification is posted shortly before the shutdown, giving some time to abort the process.


# shutdown_temp (st) #
#
# Type: Integer (C)
# Default: 55
#
# Shutdown the system if battery temperature &gt;= this value.


# temp_level (tl) #
#
# Type: Integer (percentage)
# Default: 0
#
# This is an alternate current limiting feature.
# Some devices have adjustable "temperature levels" and/or charge_control_limit, siop_level parameters.
# At the highest level, charging current is blocked.
# The stock values are generally integers, ranging from 0 to 6, 7 or so. siop_level (Samsung) ranges from 0 to 100).
# For greater flexibility, this variable stores a percentage value, which is internally mapped to the system's scales.
# Tip: If mcc is ignored under high temperature, but you still want it forced, try setting tl=1.

#/DC#
</code></pre>
<hr>
<div class="markdown-heading"><h2 class="heading-element">SETUP/USAGE</h2><a id="user-content-setupusage" class="anchor" aria-label="Permalink: SETUP/USAGE" href="#setupusage"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>As the <a href="#default-configuration">default configuration</a> (above) suggests, ACC is designed to run out of the box, with little to no customization/intervention.</p>
<p>The only command you have to remember is <code>acc</code>.
It's a wizard you'll either love or hate.</p>
<p>If you feel uncomfortable with the command line, skip this section and use a front-end app instead.</p>
<p>Alternatively, you can use a <code>text editor</code> to modify <code>/data/adb/vr25/acc-data/config.txt</code>.
The config file itself has configuration instructions.
Those are the same found in the <a href="#default-configuration">default configuration</a> section, above.</p>
<div class="markdown-heading"><h3 class="heading-element">Terminal Commands</h3><a id="user-content-terminal-commands" class="anchor" aria-label="Permalink: Terminal Commands" href="#terminal-commands"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<pre><code>#TC#

Usage

  acc   Wizard

  accd [--init|-i]   Start/restart accd; -i triggers a clean restart (recreates runtime cache)

  accd.   Stop acc/daemon

  accd,   Print acc/daemon status (running or not)

  acc [pause_capacity/millivolts [resume_capacity/millivolts, default: pause_capacity/millivolts - 5%/50mV]]
    e.g.,
      acc 75 70
      acc 80 (resume_capacity defaults to 80% - 5)
      acc 3900 (same as acc 3900 3870, great idle mode alternative)

  acc [options] [args]   Refer to the list of options below

  acca [options] [args]   acc optimized for front-ends

  acc[d] -x [options] [args]   Sets log=/sdcard/Download/acc[d]-${device}.log; useful for debugging unwanted reboots

  A custom config path can be specified as first parameter (second if -x is used).
  If the file doesn't exist, the current config is cloned.
    e.g.,
      acc /data/acc-night-config.txt --set pause_capacity=45 resume_capacity=43
      acc /data/acc-night-config.txt --set --current 500
      accd /data/acc-night-config.txt --init

  Notes regarding accd:
    - The order of "--init|-i" does not matter.
    - The config path string shall not contain "--init|-i".


Options

  -b|--rollback [nv]   Restore previous installation; with "n" flag, the config is not restored; with "v" flag, nothing is done other than printing the version that would have been restored

  -c|--config [[editor] [editor_opts] | g for GUI]   Edit config (default editor: nano/vim/vi)
    e.g.,
      acc -c (edit w/ nano/vim/vi)
      acc -c less
      acc -c cat

  -c|--config a|d string|regex   Append (a) or delete (d) string/pattern to/from config
    e.g.,
      acc -c a : sleep profile, at 22:00 acc -s pc=50 mcc=500 mcv=3900, acc -n switched to sleep profile (append a schedule)
      acc -c d sleep (remove all lines matching "sleep")

  -c|--config h string   Print config help text associated with "string" (config variable)
    e.g., acc -c h rt (or resume_temp)

  -d|--disable [#%, #s, #m, #h or #mv (optional)]   Disable charging
    e.g.,
      acc -d 70% (do not recharge until capacity &lt;= 70%)
      acc -d 1h (do not recharge until 1 hour has passed)
      acc -d 4000mv (do not recharge until battery voltage &lt;= 4000mV)

  -D|--daemon   Print daemon status, (and if running) version and PID
    e.g., acc -D (alias: "accd,")

  -D|--daemon [start|stop|restart]   Manage daemon
    e.g.,
      acc -D start (alias: accd)
      acc -D restart (alias: accd)
      accd -D stop (alias: "accd.")

  -e|--enable [#%, #s, #m, #h or #mv (optional)]   Enable charging
    e.g.,
      acc -e 75% (recharge to 75%)
      acc -e 30m (recharge for 30 minutes)
      acc -e 4000mv (recharge to 4000mV)

  -f|--force|--full [capacity] [-a] [additional opts/args]   Charge once to a given capacity (default: 100%), without restrictions
    e.g.,
      acc -f 95 (charge to 95%)
      acc -f (charge to 100%)
      acc -f -s mcc=500 (charge to 100% with a 500 mA limit)
      acc -f 90 -a (the -a (auto) tries to restart accd automatically shortly after the charger is unplugged; not supported by all devices)

  -F|--flash ["zip_file"]   Flash any zip files whose update-binary is a shell script
    e.g.,
      acc -F (lauches a zip flashing wizard)
      acc -F "file1" "file2" "fileN" ... (install multiple zips)
      acc -F "/sdcard/Download/Magisk-v20.0(20000).zip"

  -h|--help [[editor] [editor_opts] | g for GUI]   Print this help text, plus the config

  -H|--health &lt;mAh&gt;   Print estimated battery health

  -i|--info [case insensitive egrep regex (default: ".")]   Show battery info
    e.g.,
      acc -i
      acc -i volt
      acc -i volt,curr (multiple patterns)

  -l|--log [-a|--acc] [[editor] [editor_opts] | g for GUI]   Print/edit accd log (default) or acc log (-a|--acc)
    e.g.,
      acc -l (same as acc -l less)
      acc -l rm
      acc -l -a cat
      acc -l grep ': ' (show explicit errors only)

  -la   Same as -l -a

  -l|--log -e|--export   Export all logs to /sdcard/Download/acc-logs-$deviceName.tgz
    e.g., acc -l -e

  -le   Same as -l -e

  -n|--notif [["STRING" (default: ":)")] [USER ID (default: 2000 (shell))]]   Post Android notification; may not work on all systems
    e.g., acc -n "Hello, World!"

  -p|--parse [&lt;base file&gt; &lt;file to parse&gt;] | &lt;file to parse&gt;]   Helps find potential charging switches quickly, for any device
    e.g.,
      acc -p   Parse /logs/power_supply-\*.log and print potential charging switches not present in /ch-switches
      acc -p /sdcard/power_supply-harpia.log   Parse the given file and print potential charging switches that are not already in /ch-switches
      acc -p /sdcard/charging-switches.txt /sdcard/power_supply-harpia.log   Parse /sdcard/power_supply-harpia.log and print potential charging switches absent from /sdcard/charging-switches.txt

  -r|--readme [g for GUI]]   Open the manual

  -R|--resetbs   Reset battery stats
    e.g., acc -R

  -s|--set   Print current config
    e.g., acc -s

  -s|--set file   Get config from file (in "acc -s" format); the file's path must be absolute; partial config is supported
    e.g., acc -s /data/config

  -s|--set prop1=value "prop2=value1 value2"   Set [multiple] properties
    e.g.,
      acc -s charging_switch=
      acc -s pause_capacity=60 resume_capacity=55 (shortcuts: acc -s pc=60 rc=55, acc 60 55)
      acc -s "charging_switch=battery/charging_enabled 1 0" resume_capacity=55 pause_capacity=60
    Note: all properties have short aliases for faster typing; run "acc -c cat" to see them

  -s|--set c|--current [milliamps|-]   Set/print/restore_default max charging current (range: 0-9999 mA)
    e.g.,
      acc -s c (print current limit)
      acc -s c 500 (set)
      acc -s c - (restore default)

  -sc [milliamps|-]   Same as above

  -s|--set l|--lang   Change language
    e.g., acc -s l

  -sl   Same as above

  -s|--set d|--print-default [egrep regex (default: ".")]   Print default config without blank lines
    e.g.,
      acc -s d (print entire defaul config)
      acc -s d cap (print only entries matching "cap")
      acc -s cap,temp (multiple patterns)

  -sd [egrep regex (default: ".")]   Same as above

  -s|--set p|--print [egrep regex (default: ".")]   Print current config without blank lines (refer to previous examples)

  -sp [egrep regex (default: ".")]   Same as above

  -s|--set r|--reset [a]   Restore default config ("a" is for "all": config and control file blacklists, essentially a hard reset)
    e.g.,
      acc -s r

  -sr [a]   Same as above


  -s|--set s|charging_switch   Enforce a specific charging switch
    e.g., acc -s s

  -ss    Same as above

  -s|--set s:|chargingSwitch:   List known charging switches
    e.g., acc -s s:

  -ss:   Same as above

  -s|--set s::|chargingSwitch::   List working charging switches and mcc, mcv &amp; tl support status
    e.g., acc -s s::

  -ss::   Same as above

  -s|--set v|--voltage [millivolts|-] [--exit]   Set/print/restore_default max charging voltage (range: 3700-4300 mV)
    e.g.,
      acc -s v (print)
      acc -s v 3900 (set)
      acc -s v - (restore default)
      acc -s v 3900 --exit (stop the daemon after applying settings)

  -sv [millivolts|-] [--exit]   Same as above

  -t[#]|--test[#] [q] [ctrl_file1 on off [ctrl_file2 on off]]   Test custom charging switches
    Implies -x, as in acc -x -t ...
    [q]: acca -t q ... (quiet test; reports Ok, Idle or Fail)
    e.g.,
      acc -t5 battery/charging_enabled 1 0 (test with _STI=5)
      acc -t battery/charging_enabled 1 0
      acc -t /proc/mtk_battery_cmd/current_cmd 0::0 0::1 /proc/mtk_battery_cmd/en_power_path 1 0 ("::" is a placeholder for " " - MTK only)

  -t[#]|--test[#] [q] [file]   Test charging switches from a file (default: /ch-switches)
    Implies -x, as in acc -x -t ...
    [q]: acca -t q ... (quiet test; reports Ok, Idle or Fail)
    e.g.,
      acc -t (test known switches)
      acc -t /sdcard/experimental_switches.txt (test custom/foreign switches)

  -t[#]|--test[#] [q] [p|parse]   Parse potential charging switches from the power supply log (as "acc -p"), test them all, and add the working ones to the list of known switches
    Implies -x, as in acc -x -t p
    [q]: acca -t q ... (quiet test; reports Ok, Idle or Fail)
    e.g., acc -t p

  -T|--logtail ['egrep regex, with "," in place of "|"']   Monitor accd log (tail -F)
    e.g.,
      acc -T
      acc -T 'cap,enable'

  -u|--upgrade [-c|--changelog] [-f|--force] [-n|--non-interactive]   Online upgrade/downgrade
    e.g.,
      acc -u dev (upgrade to the latest dev version)
      acc -u (latest version from the current branch)
      acc -u master^1 -f (previous stable release)
      acc -u -f dev^2 (two dev versions below the latest dev)
      acc -u v2020.4.8-beta --force (force upgrade/downgrade to v2020.4.8-beta)
      acc -u -c -n (if update is available, prints version code (integer) and changelog)
      acc -u -c (same as above, but with install prompt)

  -U|--uninstall   Completely remove acc and AccA
    e.g., acc -U

  -v|--version   Print acc version and version code
    e.g., acc -v

  -w[#]|--watch[#] [pattern1,pattern2,...]   Monitor battery uevent
    e.g.,
      acc -w (update info every second)
      acc -w0.5 (update info every half a second)
      acc -w0 (no extra delay)
      acc -w curr,volt


Exit Codes

  0. True/success
  1. False or general failure
  2. Incorrect command syntax
  3. Missing busybox binary
  4. Not running as root
  5. Update available ("--upgrade")
  6. No update available ("--upgrade")
  7. Failed to disable charging
  8. Daemon already running ("--daemon start")
  9. Daemon not running ("--daemon" and "--daemon stop")
  10. All charging switches fail (--test)
  11. Current (mA) out of 0-9999 range
  12. Initialization failed
  13. Failed to lock /acc.lock
  14. ACC won't initialize, because a "disable" flag is set
  15. Idle mode is supported (--test)
  16. Failed to enable charging (--test)

  Logs are exported automatically ("--log --export") on exit codes 1, 2 and 7.


Tips

  Commands can be chained for extended functionality.
    e.g., charge for 30 minutes, pause charging for 6 hours, charge to 85% and restart the daemon
    acc -e 30m &amp;&amp; acc -d 6h &amp;&amp; acc -e 85 &amp;&amp; accd
  One can take advantage of one-line scripts and the built-in "at" function to schedule profiles (refer back to -c|--config).

  Sample profile
    acc -s pc=60 mcc=500 mcv=3900
      This keeps battery capacity between 55-60%, limits charging current to 500 mA and voltage to 3900 millivolts.
      It's great for nighttime and "forever-plugged".

  Refer to acc -r (or --readme) for the full documentation (recommended)

#/TC#
</code></pre>
<hr>
<div class="markdown-heading"><h2 class="heading-element">PLUGINS</h2><a id="user-content-plugins" class="anchor" aria-label="Permalink: PLUGINS" href="#plugins"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Those are scripts that override functions and some global variables.
They should be placed in <code>/data/adb/vr25/acc-data/plugins/</code>.
Files are sorted and sourced.
Filenames shall not contain spaces.
Hidden files and those without the <code>.sh</code> extension are ignored.</p>
<p>There are also <em>volatile</em> plugins (gone on reboot, useful for debugging): <code>/dev/.vr25/acc/plugins/</code>.
Those override the permanent.</p>
<p>A daemon restart is required to load new/modified plugins.</p>
<p>An alternative to plugins are one-line scripts. Refer to the <a href="#default-configuration">default configuration</a> section above.</p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">NOTES/TIPS FOR FRONT-END DEVELOPERS</h2><a id="user-content-notestips-for-front-end-developers" class="anchor" aria-label="Permalink: NOTES/TIPS FOR FRONT-END DEVELOPERS" href="#notestips-for-front-end-developers"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">Basics</h3><a id="user-content-basics" class="anchor" aria-label="Permalink: Basics" href="#basics"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>ACC does not require KernelSU/Magisk.
Any root solution works, as long as busybox is installed.</p>
<p>Use <code>/dev/acca</code> instead of regular <code>acc</code>.
It's optimized for front-ends, guaranteed to be readily available after installation/upgrades and significantly faster than its <code>acc</code> counterpart.
Additionally, <code>/dev/acca --set prop1=bla prop2="bla bla" ...</code> runs asynchronously (non-blocking mode) - meaning, multiple instances of it work in parallel.</p>
<p>It may be best to use long options over short equivalents - e.g., <code>--set charging_switch=</code> instead of <code>-s s=</code>.
This makes code more readable (less cryptic).</p>
<p>Include provided descriptions of ACC features/settings in your front-end.
Provide additional information (trusted) where appropriate.
Explain settings/concepts as clearly and as concisely as possible.</p>
<p>Take advantage of acc exit codes.
Refer back to <code>SETUP/USAGE &gt; [Terminal Commands](#terminal-commands) &gt; Exit Codes</code>.</p>
<div class="markdown-heading"><h3 class="heading-element">Installing/Upgrading ACC</h3><a id="user-content-installingupgrading-acc" class="anchor" aria-label="Permalink: Installing/Upgrading ACC" href="#installingupgrading-acc"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>This should be trivial.
The simplest way is flashing acc from KernelSU/Magisk module manager.</p>
<p>Alternatively, <code>install.sh</code>, <code>install-online.sh</code> or <code>install-tarball.sh</code> can be used.
For details, refer back to <a href="#install-from-local-source-or-github">install from local source or GitHub</a>.</p>
<p>Developers can also use the <em>updateJSON</em> API.
The front-end downloads and parses <a href="https://raw.githubusercontent.com/VR-25/acc/master/module.json" rel="nofollow">this JSON file</a>.
The format is as follows:</p>
<pre><code>{
    "busybox": "https://github.com/Magisk-Modules-Repo/busybox-ndk",
    "changelog": "https://raw.githubusercontent.com/VR-25/acc/master/changelog.md",
    "curl": "https://github.com/Zackptg5/Cross-Compiled-Binaries-Android/tree/master/curl",
    "tgz": "https://github.com/VR-25/acc/releases/download/$version/acc_${version}_${versionCode}.tgz",
    "tgzInstaller": "https://github.com/VR-25/acc/releases/download/$version/install-tarball.sh",
    "version": "STRING",
    "versionCode": INT,
    "zipUrl": "https://github.com/VR-25/acc/releases/download/$version/acc_${version}_${versionCode}.zip"
}
</code></pre>
<div class="markdown-heading"><h3 class="heading-element">Uninstalling ACC</h3><a id="user-content-uninstalling-acc" class="anchor" aria-label="Permalink: Uninstalling ACC" href="#uninstalling-acc"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Either run <code>/data/adb/vr25/acc/uninstall.sh</code> (no reboot required) or uninstall from KernelSU/Magisk module manager and reboot.</p>
<div class="markdown-heading"><h3 class="heading-element">Initializing ACC</h3><a id="user-content-initializing-acc" class="anchor" aria-label="Permalink: Initializing ACC" href="#initializing-acc"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>On <code>boot_completed</code> receiver and <code>main activity</code>, run:</p>
<p><code>test -f /dev/acca || /data/adb/vr25/acc/service.sh</code></p>
<p>Explanation:</p>
<p>ACC's working environment must be initialized - i.e., by updating the stock charging config (for restoring without a reboot) and pre-processing data for greater efficiency.
This is done exactly once after boot.
If it were done only after installation/upgrade, one would have to reinstall/upgrade acc after every kernel update.
That's because kernel updates often change the default power supply drivers' settings.</p>
<p>Since acc's core executables are dynamic ([expected to] change regularly), those are linked to <code>/dev/</code> to preserve the APIs.
The links must be recreated once after boot (since <code>/dev/</code> is volatile).</p>
<p><code>accd</code> is a symbolic link to <code>service.sh</code>.
If service.sh is executed every time the <code>main activity</code> is launched, accd will be repeatedly restarted for no reason.
Thus, we run <code>test -f /dev/acca || /data/adb/vr25/acc/service.sh</code>, as opposed to just <code>/data/adb/vr25/acc/service.sh</code></p>
<p>Notes</p>
<ul>
<li>This "manual" initialization is only <em>strictly</em> required for non KernelSU/Magisk installs -- and only once per boot session. In other words, KernelSU and Magisk already run <code>service.sh</code> shortly after boot.</li>
<li>ACC's installer always initializes it.</li>
</ul>
<div class="markdown-heading"><h3 class="heading-element">Managing ACC</h3><a id="user-content-managing-acc" class="anchor" aria-label="Permalink: Managing ACC" href="#managing-acc"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>As already stated, front-ends shall use the executable <code>/dev/acca</code>.
Refer to the <a href="#default-configuration">default configuration</a> and <a href="#terminal-commands">terminal commands</a> sections above.</p>
<p>The default config reference has a section entitled "aliases".
Use ONLY those with <code>/dev/acca --set</code>!
i.e., <code>/dev/acca --set chargingSwitch=...</code> is not supported!
Use either <code>s</code> or <code>charging_switch</code>.
<code>chargingSwitch</code> and all the other "camelcase" style variables are for internal use only (i.e., private APIs).</p>
<p>Do not parse the config file directly.
Use <code>--set --print ['regex']</code> and <code>--set --print-default ['regex']</code>.
Refer back to <a href="#terminal-commands">terminal commands</a> for details.</p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">TROUBLESHOOTING</h2><a id="user-content-troubleshooting" class="anchor" aria-label="Permalink: TROUBLESHOOTING" href="#troubleshooting"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">acc -t Results Are Inconsistent</h3><a id="user-content-acc--t-results-are-inconsistent" class="anchor" aria-label="Permalink: acc -t Results Are Inconsistent" href="#acc--t-results-are-inconsistent"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Refer to "default config &gt; batt_status_workaround".</p>
<div class="markdown-heading"><h3 class="heading-element">Charging Switch</h3><a id="user-content-charging-switch" class="anchor" aria-label="Permalink: Charging Switch" href="#charging-switch"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>By default, ACC uses whichever <a href="https://github.com/VR-25/acc/blob/dev/install/ctrl-files.sh">charging switch</a> works ("automatic" mode).
However, things don't always go well.</p>
<ul>
<li>
<p>Some switches are unreliable under certain conditions (e.g., while the screen is off).</p>
</li>
<li>
<p>Others hold a <a href="https://duckduckgo.com/lite/?q=wakelock" rel="nofollow">wakelock</a>.
This causes fast battery drain when charging is paused and the device remains plugged.</p>
</li>
<li>
<p>Charging keeps being re-enabled by the system, seconds after acc daemon disables it.
As a result, the battery eventually charges to 100% capacity, regardless of pause_capacity.
Refer to config &gt; force_off.</p>
</li>
<li>
<p>High CPU load (drains battery) was also reported.</p>
</li>
<li>
<p>In the worst case scenario, the battery status is reported as <code>discharging</code>, while it's actually <code>charging</code>.</p>
</li>
</ul>
<p>In such situations, one has to enforce a switch that works as expected.
Here's how to do it:</p>
<ol>
<li>Run <code>acc -t</code> to see which switches work.</li>
<li>Run <code>acc -ss</code> to enforce a working switch.</li>
<li>Test the reliability of the set switch. If it doesn't work properly, try another.</li>
</ol>
<p>Since not everyone is tech savvy, ACC daemon automatically applies settings for certain devices for greater compatibility.
These are in <code>acc/oem-custom.sh</code>.</p>
<div class="markdown-heading"><h3 class="heading-element">Custom Max Charging Voltage And Current Limits</h3><a id="user-content-custom-max-charging-voltage-and-current-limits" class="anchor" aria-label="Permalink: Custom Max Charging Voltage And Current Limits" href="#custom-max-charging-voltage-and-current-limits"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Unfortunately, not all kernels support these features.
While custom current limits are supported by most (at least to some degree), voltage tweaking support is <em>exceptionally</em> rare.</p>
<p>That said, the existence of potential voltage/current control file doesn't necessarily mean these are writable* or the features, supported.</p>
<p>* Root is not enough.
Kernel level permissions forbid write access to certain interfaces.</p>
<p>Sometimes, restoring the default current may not work without a system reboot.
A workaround is setting the default max current value or any arbitrary high number (e.g., 9000 mA).
Don't worry about frying things.
The device will only draw the max it can take.</p>
<p><strong>WARNING</strong>: limiting voltage causes battery state of charge (SoC) deviation on some devices.
The  battery management system self-calibrates constantly, though.
Thus, as soon as the default voltage limit is restored, it'll start "fixing" itself.</p>
<p>Limiting current, on the other hand, has been found to be universally safe.
Some devices do not support just any current value, though.
That's not to say out-of-range values cause issues.
These are simply ignored.</p>
<p>If low current values don't work, try setting <code>current_workaround=true</code>.
Refer to the <a href="#default-configuration">default configuration</a> section for details.</p>
<p>One can override the default lists of max charging current/voltage control files by copying <code>acc/ctrl-files.sh</code> to <code>/data/adb/vr25/acc-data/plugins/</code> and modifying it accordingly.
Note that default limits must be restored prior to that to avoid the need for a system reboot.
Reminder: A daemon restart is required to load new/modified plugins.</p>
<div class="markdown-heading"><h3 class="heading-element">Diagnostics/Logs</h3><a id="user-content-diagnosticslogs" class="anchor" aria-label="Permalink: Diagnostics/Logs" href="#diagnosticslogs"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Volatile logs (gone on reboot) are stored in <code>/dev/.vr25/acc/</code> (<code>.log</code> files only).
Persistent logs reside in <code>/data/adb/vr25/acc-data/logs/</code>.</p>
<p><code>acc -le</code> exports all acc logs, plus Magisk's and extras to <code>/data/adb/acc-data/logs/acc-$device_codename.tgz</code>.
The logs do not contain any personal information and are never automatically sent to the developer.
Automatic exporting (local) happens under specific conditions (refer back to <code>SETUP/USAGE &gt; Terminal Commands &gt; Exit Codes</code>).</p>
<div class="markdown-heading"><h3 class="heading-element">Install, Upgrade, Stop and Restart Processes Seem to Take Too Long</h3><a id="user-content-install-upgrade-stop-and-restart-processes-seem-to-take-too-long" class="anchor" aria-label="Permalink: Install, Upgrade, Stop and Restart Processes Seem to Take Too Long" href="#install-upgrade-stop-and-restart-processes-seem-to-take-too-long"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The daemon stop process implies complete reversal of changes made to the charging management system.
Sometimes, <strong>this requires the charger to be plugged</strong>.
That's because some devices have kernel bugs and/or bad charging driver implementations.
That said, accd is always stopped <em>gracefully</em> to ensure the restoration takes place.
One who knows what they're doing, can force-stop accd by running <code>pkill -9 -f accd</code>.</p>
<div class="markdown-heading"><h3 class="heading-element">Kernel Panic and Spontaneous Reboots</h3><a id="user-content-kernel-panic-and-spontaneous-reboots" class="anchor" aria-label="Permalink: Kernel Panic and Spontaneous Reboots" href="#kernel-panic-and-spontaneous-reboots"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Control files that trigger these are automatically backlisted (commented out in <code>/data/adb/acc-data/logs/write.log</code>).</p>
<div class="markdown-heading"><h3 class="heading-element">Restore Default Config</h3><a id="user-content-restore-default-config" class="anchor" aria-label="Permalink: Restore Default Config" href="#restore-default-config"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>This can potentially save a lot of time and grief.</p>
<p><code>acc --set --reset</code>, <code>acc -sr</code> or <code>rm /data/adb/vr25/acc-data/config.txt</code> (failsafe)</p>
<div class="markdown-heading"><h3 class="heading-element">Samsung, Charging <em>Always</em> Stops at 70% Capacity</h3><a id="user-content-samsung-charging-always-stops-at-70-capacity" class="anchor" aria-label="Permalink: Samsung, Charging Always Stops at 70% Capacity" href="#samsung-charging-always-stops-at-70-capacity"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>This is a device-specific issue (by design?).
It's caused by the <em>store_mode</em> charging control file.
Switch to <em>batt_slate_mode</em> to prevent it.
Refer back to <a href="#charging-switch">charging switch</a> above for details on that.</p>
<div class="markdown-heading"><h3 class="heading-element">Slow Charging</h3><a id="user-content-slow-charging" class="anchor" aria-label="Permalink: Slow Charging" href="#slow-charging"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>At least one of the following may be the cause:</p>
<ul>
<li>Charging current and/or voltage limits</li>
<li>Cooldown cycle (non optimal charge/pause ratio, try 50/10 or 50/5)</li>
<li>Troublesome charging switch (refer back to <code>TROUBLESHOOTING &gt; Charging Switch</code>)</li>
<li>Weak adapter and/or power cord</li>
</ul>
<div class="markdown-heading"><h3 class="heading-element">Unable to Charge</h3><a id="user-content-unable-to-charge" class="anchor" aria-label="Permalink: Unable to Charge" href="#unable-to-charge"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Refer back to the <a href="#warnings">warnings</a> section above.</p>
<div class="markdown-heading"><h3 class="heading-element">Unexpected Reboots</h3><a id="user-content-unexpected-reboots" class="anchor" aria-label="Permalink: Unexpected Reboots" href="#unexpected-reboots"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Wrong/troublesome charging control files may trigger unwanted reboots.
ACC blacklist [some of] these automatically (registered in <code>/data/adb/vr25/acc-data/logs/write.log</code>, with a leading hashtag).
Sometimes, there may be false positives in there - i.e., due to unexpected reboots caused by something else. Thus, if a control file that used to work, suddenly does not, see if it was blacklisted (<code>acc -t</code> also reveals blacklisted switches).
Send <code>write.log</code> to the developer once the reboots have stopped.</p>
<div class="markdown-heading"><h3 class="heading-element">WARP, VOOC and Other Fast Charging Tech</h3><a id="user-content-warp-vooc-and-other-fast-charging-tech" class="anchor" aria-label="Permalink: WARP, VOOC and Other Fast Charging Tech" href="#warp-vooc-and-other-fast-charging-tech"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Charging switches may not work reliably with the original power adapter.
This has nothing to do with acc.
It's bad design by the OEMs themselves.
If you face issues, either try a different charging switch or a regular power brick (a.k.a., slow charger).
You may also want to try stopping charging by limiting current/voltage.</p>
<div class="markdown-heading"><h3 class="heading-element">Why Did accd Stop?</h3><a id="user-content-why-did-accd-stop" class="anchor" aria-label="Permalink: Why Did accd Stop?" href="#why-did-accd-stop"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Run <code>acc -l tail</code> to find out.
This will print the last 10 lines of the daemon log file.</p>
<p>A relatively common exit code is <code>7</code> - meaning all charging switches failed to disable charging.
It usually happens due to kernel issues (refer to the previous subsection - <a href="#charging-switch">charging switch</a>).
The daemon only stops due to this if acc is set to automatically determine the switches to use (default behavior).
Manually setting a working switch with <code>acc -ss</code> or <code>acc -s s="SWITCHES GO HERE --"</code> disables auto mode and prevents accd from stopping if the set the charging switches fail.</p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">POWER SUPPLY LOGS (HELP NEEDED)</h2><a id="user-content-power-supply-logs-help-needed" class="anchor" aria-label="Permalink: POWER SUPPLY LOGS (HELP NEEDED)" href="#power-supply-logs-help-needed"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Please run <code>acc -le</code> and upload <code>/data/adb/vr25/acc-data/logs/power_supply-*.log</code> to <a href="https://www.dropbox.com/request/WYVDyCc0GkKQ8U5mLNlH" rel="nofollow">my dropbox</a> (no account/sign-up required).
This file contains invaluable power supply information, such as battery details and available charging control files.
A public database is being built for mutual benefit.
Your cooperation is greatly appreciated.</p>
<p>Privacy Notes</p>
<ul>
<li>Name: random/fake</li>
<li>Email: random/fake</li>
</ul>
<p>See current submissions <a href="https://www.dropbox.com/sh/rolzxvqxtdkfvfa/AABceZM3BBUHUykBqOW-0DYIa?dl=0" rel="nofollow">here</a>.</p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">LOCALIZATION</h2><a id="user-content-localization" class="anchor" aria-label="Permalink: LOCALIZATION" href="#localization"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Currently Supported Languages and Translation Levels (default, full, good, fair, minimal)</p>
<ul>
<li>Chinese, simplified (zh-rCN): minimal</li>
<li>Chinese, traditional (zh-rTW): minimal</li>
<li>English (en): default</li>
<li>French (fr): good</li>
<li>German (de_DE): fair</li>
<li>Indonesia (id): minimal</li>
<li>Portuguese, Portugal (pt-PT): minimal</li>
<li>Turkish (tr): good</li>
</ul>
<p>Translation Notes</p>
<ol>
<li>
<p>Start with copies of <a href="https://github.com/VR-25/acc/blob/dev/install/strings.sh">acc/strings.sh</a> and, optionally, <a href="https://github.com/VR-25/acc/blob/dev/README.md">README.md</a>.</p>
</li>
<li>
<p>Modify the header of strings.sh to reflect the translation (e.g., # Espaol (es)).</p>
</li>
<li>
<p>Anyone is free and encouraged to open translation <a href="https://duckduckgo.com/lite/?q=pull+request" rel="nofollow">pull requests</a>.
Alternatively, a <em>compressed</em> archive of translated <code>strings.sh</code> and <code>README.md</code> files can be sent to the developer via Telegram (link below).</p>
</li>
<li>
<p>Use <code>acc -sl</code> (--set --lang): language switching wizard or <code>acc -s l=&lt;lang_string&gt;</code> to set a language.</p>
</li>
</ol>
<hr>
<div class="markdown-heading"><h2 class="heading-element">TIPS</h2><a id="user-content-tips" class="anchor" aria-label="Permalink: TIPS" href="#tips"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">
<em>Always</em> Limit the Charging Current If Your Battery is Old and/or Tends to Discharge Too Fast</h3><a id="user-content-always-limit-the-charging-current-if-your-battery-is-old-andor-tends-to-discharge-too-fast" class="anchor" aria-label="Permalink: Always Limit the Charging Current If Your Battery is Old and/or Tends to Discharge Too Fast" href="#always-limit-the-charging-current-if-your-battery-is-old-andor-tends-to-discharge-too-fast"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>This extends the battery's lifespan and may even <em>reduce</em> its discharge rate.</p>
<p>750-1000mA is a good range for regular use.</p>
<p>500mA is a comfortable minimum - and also very compatible.</p>
<p>If your device does not support custom current limits, use a dedicated ("slow") power adapter.</p>
<div class="markdown-heading"><h3 class="heading-element">Generic</h3><a id="user-content-generic" class="anchor" aria-label="Permalink: Generic" href="#generic"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Force fast charge: <code>appy_on_boot="/sys/kernel/fast_charge/force_fast_charge::1::0 usb/boost_current::1::0 charger/boost_current::1::0"</code></p>
<div class="markdown-heading"><h3 class="heading-element">Google Pixel Devices</h3><a id="user-content-google-pixel-devices" class="anchor" aria-label="Permalink: Google Pixel Devices" href="#google-pixel-devices"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Force fast wireless charging with third party wireless chargers that are supposed to charge the battery faster: <code>apply_on_plug=wireless/voltage_max::9000000</code>.</p>
<p>This may not work on all Pixel devices.
There are no negative consequences when it doesn't.</p>
<div class="markdown-heading"><h3 class="heading-element">Export/import Config</h3><a id="user-content-exportimport-config" class="anchor" aria-label="Permalink: Export/import Config" href="#exportimport-config"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Export: <code>acc -s &gt; /sdcard/Download/config.txt</code></p>
<p>Import: <code>acc -s /sdcard/Download/config.txt</code></p>
<p>Partial import is supported - meaning, users can share just a portion of the config (e.g., <code>acc -sp curr,volt &gt; file</code>); whoever imports this, gets just those changes.</p>
<div class="markdown-heading"><h3 class="heading-element">Override Battery mAh Capacity</h3><a id="user-content-override-battery-mah-capacity" class="anchor" aria-label="Permalink: Override Battery mAh Capacity" href="#override-battery-mah-capacity"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>An "extended" battery won't charge fully if the kernel still has the stock <code>charge_full_design</code> value.
Some devices allow that to be modified. If that's the case for you, use <code>apply_on_boot</code> to set the desired value(s) in <code>/sys/class/power_supply/*/charge_full_design</code>.</p>
<div class="markdown-heading"><h3 class="heading-element">Override Broken Temperature Sensor</h3><a id="user-content-override-broken-temperature-sensor" class="anchor" aria-label="Permalink: Override Broken Temperature Sensor" href="#override-broken-temperature-sensor"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>If your battery's thermistor always reports a negative value, and charging is very slow or even off, see if the following helps (paste and run):</p>
<p><code>acc -c d temp_cool; acc -c a ':; for i in */temp_cool */temp_cold; do [ -f $i ] || continue; chmod a+w $i &amp;&amp; echo "-999" &gt; $i || :; done'</code></p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">FREQUENTLY ASKED QUESTIONS (FAQ)</h2><a id="user-content-frequently-asked-questions-faq" class="anchor" aria-label="Permalink: FREQUENTLY ASKED QUESTIONS (FAQ)" href="#frequently-asked-questions-faq"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<blockquote>
<p>How do I report issues?</p>
</blockquote>
<p>Open issues on GitHub or contact the developer on Telegram (preferred) or XDA (links below).
Always provide as much information as possible.
Attach <code>/sdcard/Download/acc-logs-*.tgz</code> - generated by <code>acc -le</code> <em>right after</em> the problem occurs.
Refer back to <code>TROUBLESHOOTING &gt; Diagnostics/Logs</code> for additional details.</p>
<blockquote>
<p>Why won't you support my device? I've been waiting for ages!</p>
</blockquote>
<p>Firstly, have some extra patience!
Secondly, several systems don't have intuitive charging control files; I have to dig deeper - and oftentimes, improvise; this takes time and effort.
Lastly, some systems don't support custom charging control at all;  in such cases, you have to keep trying different kernels and uploading the respective power supply logs.
Refer back to <code>POWER SUPPLY LOGS (HELP NEEDED)</code>.</p>
<blockquote>
<p>Why, when and how should I calibrate the battery manager?</p>
</blockquote>
<p>With modern battery management systems, that's generally unnecessary.</p>
<p>However, if your battery is underperforming, you may want to try the procedure described at <a href="https://batteryuniversity.com/article/bu-603-how-to-calibrate-a-smart-battery" rel="nofollow">https://batteryuniversity.com/article/bu-603-how-to-calibrate-a-smart-battery</a> .</p>
<blockquote>
<p>I set voltage to 4080 mV and that corresponds to just about 75% charge.
But is it typically safer to let charging keep running, or to have the circuits turn on and shut off between defined percentage levels repeatedly?</p>
</blockquote>
<p>It's not much about which method is safer.
It's specifically about electron stability: optimizing the pressure (voltage) and current flow.</p>
<p>As long as you don't set a voltage limit higher than 4200 mV, and don't leave the device plugged in for extended periods of time, you're good with that limitation alone.
Otherwise, the other option is actually more beneficial - since it mitigates high pressure (voltage) exposure/time to a greater extent.
If you use both, simultaneously - you get the best of both worlds.
On top of that, if you enable the cooldown cycle, it'll give you even more benefits.</p>
<p>Ever wondered why lithium ion batteries aren't sold fully charged? They're usually ~40-60% charged. Why is that?
Keeping a battery fully drained, almost fully drained or 70%+ charged for a long times, leads to significant (permanent) capacity loss</p>
<p>Putting it all together in practice...</p>
<p>Night/heavy-duty/forever-plugged profile: keep capacity within 40-60% (e.g., acc 50 45) and/or voltage around ~3900 mV</p>
<p>Day/regular profile: max capacity: 75-80% and/or voltage no higher than 4100 mV</p>
<p>Travel profile: capacity up to 95% and/or voltage no higher than 4200 mV</p>
<p>* <a href="https://batteryuniversity.com/article/bu-808-how-to-prolong-lithium-based-batteries/" rel="nofollow">https://batteryuniversity.com/article/bu-808-how-to-prolong-lithium-based-batteries/</a></p>
<blockquote>
<p>I don't really understand what the "-f|--force|--full [capacity]" is meant for.</p>
</blockquote>
<p>Consider the following situation:</p>
<p>You're almost late for an important event.
You recall that I stole your power bank and sold it on Ebay.
You need your device and a good battery backup.
The event will take the whole day and you won't have access to an external power supply in the middle of nowhere.
You need your battery charged fast and as much as possible.
However, you don't want to modify ACC config nor manually stop/restart the daemon.</p>
<blockquote>
<p>Do I have to install/upgrade both ACC and AccA?</p>
</blockquote>
<p>To really get out of this dilemma, you have to understand what ACC and AccA essentially are.</p>
<p>ACC is a Android program that controls charging.
It can be installed as an app (e.g., AccA) module, Magisk module or standalone software. Its installer determines the installation path/variant. The user is given the power to override that.</p>
<p>A plain text file holds the program's configuration. It can be edited with any root text editor.
ACC has a command line interface (CLI) - which in essence is a set of Application Programing Interfaces (APIs). The main purpose of a CLI/API is making difficult tasks ordinary.</p>
<p>AccA is a graphical user interface (GUI) for the ACC command line. The main purpose of a GUI is making ordinary tasks simpler.
AccA ships with a version of ACC that is automatically installed when the app is first launched.</p>
<p>That said, it should be pretty obvious that ACC is like a fully autonomous car that also happens to have a steering wheel and other controls for a regular driver to hit a tree.
Think of AccA as a robotic driver that often prefers hitting people over trees.
Due to extenuating circumstances, that robot may not be upgraded as frequently as the car.
Upgrading the car regularly makes the driver happier - even though I doubt it has any emotion to speak of.
The back-end can be upgraded by flashing the latest ACC zip.
However, unless you have a good reason to do so, don't fix what's not broken.</p>
<blockquote>
<p>Does acc work also when Android is off?</p>
</blockquote>
<p>No, but this possibility is being explored.
Currently, it does work in recovery mode, though.</p>
<blockquote>
<p>I have this wakelock as soon as charging is disabled. How do I deal with it?</p>
</blockquote>
<p>The best solution is enforcing a charging switch that doesn't trigger a wakelock.
Refer back to <code>TROUBLESHOOTING &gt; Charging Switch</code>.
A common workaround is having <code>resume_capacity = pause_capacity - 1</code>. e.g., resume_capacity=74, pause_capacity=75.</p>
<blockquote>
<p>What's idle mode, and how do I set it up?</p>
</blockquote>
<p>It's the ability of running off the charger.
The battery behaves as if it were physically disconnected from the device.
The primary indicator of idle mode is charging current around 0 mA. One can customize idleThreshold (absolute value).</p>
<p>Idle mode is great for extended device use (e.g., GPS navigation, gaming, server). Use it when the charger must be plugged for a long time (or permanently).</p>
<p>IMPORTANT: lithium batteries have the longest lifespan when kept about 40-60% charged (about 3.7-3.9ish Volts). That said, try not to use idle mode above 60% too often.</p>
<p>Not all devices support the "native" idle mode. Hence, variants of "emulated" idle mode are available:</p>
<ol>
<li>Limit the charging voltage (requires kernel support) to a value that gets you close to the desired battery level. To avoid false positives, determine the value only after the device has been unplugged for a minute or so.</li>
<li>Pause/resume charging based on voltage thresholds (e.g., acc 3950 keeps voltage within 3800 and 3950 millivolts).</li>
<li>Set resume_capacity to (pause_capacity - 1), e.g., acc 50 49.</li>
</ol>
<p>Notes</p>
<ul>
<li>In idle mode, the battery does discharge, although very slowly. The same happens to a battery that is sitting on a shelf.</li>
<li>In emulated idle mode, the battery tends to hold its charge, since it works as a "passthrough" device. Imagine pouring water into a glass that is already full.</li>
</ul>
<blockquote>
<p>How do I enable "smart charging"?</p>
</blockquote>
<p>Configure day and night profiles:</p>
<p><code>acc -c a ": day profile; at 6:00 \"acc -s pc=75 mcc= mcv=4100; acc -n 'Switched to day profile'\""; acc -c a ": night profile; at 22:00 \"acc -s pc=50 mcc=500 mcv=3900; acc -n 'Switched to night profile'\""</code></p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">LINKS</h2><a id="user-content-links" class="anchor" aria-label="Permalink: LINKS" href="#links"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<ul>
<li>
<p><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&amp;business=iprj25@gmail.com&amp;lc=US&amp;item_name=VR25+is+creating+free+and+open+source+software.+Donate+to+suppport+their+work.&amp;no_note=0&amp;cn=&amp;currency_code=USD&amp;bn=PP-DonationsBF:btn_donateCC_LG.gif:NonHosted" rel="nofollow">Donate - Credit/Debit Card</a></p>
</li>
<li>
<p><a href="https://liberapay.com/vr25" rel="nofollow">Donate - Liberapay</a></p>
</li>
<li>
<p><a href="https://patreon.com/vr25" rel="nofollow">Donate - Patreon</a></p>
</li>
<li>
<p><a href="https://paypal.me/vr25xda" rel="nofollow">Donate - PayPal Me</a></p>
</li>
<li>
<p><a href="https://batteryuniversity.com/article/bu-808-how-to-prolong-lithium-based-batteries" rel="nofollow">Must Read - How to Prolong Lithium Ion Batteries Lifespan</a></p>
</li>
<li>
<p><a href="https://t.me/vr25_xda" rel="nofollow">Telegram Channel</a></p>
</li>
<li>
<p><a href="https://t.me/acc_group" rel="nofollow">Telegram Group</a></p>
</li>
<li>
<p><a href="https://t.me/vr25xda" rel="nofollow">Telegram Profile</a></p>
</li>
<li>
<p><a href="https://github.com/VR-25/acc">Upstream Repository</a></p>
</li>
<li>
<p><a href="https://forum.xda-developers.com/apps/magisk/module-magic-charging-switch-cs-v2017-9-t3668427" rel="nofollow">XDA Thread</a></p>
</li>
</ul>
</article></body></html>